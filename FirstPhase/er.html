<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>OGC Citizen Science Interoperability Experiment Engineering Report</title>
<link rel="stylesheet" href="stylesheets/coderay-asciidoctor.css">
</head>
<body class="book">
<div id="header">
<h1>OGC Citizen Science Interoperability Experiment Engineering Report</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Publication Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Approval Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Submission Date: YYYY-MM-DD</p>
</div>
<div class="paragraph">
<p>Reference number of this document: OGC 19-083</p>
</div>
<div class="paragraph">
<p>Reference URL for this document: <a href="http://www.opengis.net/doc/PER/t14-D012" class="bare">http://www.opengis.net/doc/PER/t14-D012</a></p>
</div>
<div class="paragraph">
<p>Category: Public Engineering Report</p>
</div>
<div class="paragraph">
<p>Editor: Joan Masó</p>
</div>
<div class="paragraph">
<p>Title: OGC Citizen Science Interoperability Experiment Engineering Report</p>
</div>
<hr>
<div class="paragraph">
<div class="title"><strong class="big">OGC Engineering Report</strong></div>
<p><strong>COPYRIGHT</strong></p>
</div>
<div class="paragraph">
<p>Copyright © 2018 Open Geospatial Consortium.
To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/" class="bare">http://www.opengeospatial.org/</a></p>
</div>
<div class="paragraph">
<p><strong>WARNING</strong></p>
</div>
<div class="paragraph">
<p>This document is not an OGC Standard. This document is an OGC Public Engineering Report created as a deliverable in an OGC Interoperability Initiative and is not an official position of the OGC membership. It is distributed for review and comment. It is subject to change without notice and may not be referred to as an OGC Standard. Further, any OGC Engineering Report should not be referenced as required or mandatory technology in procurements. However, the discussions in this document could very well lead to the definition of an OGC Standard.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong>LICENSE AGREEMENT</strong></p>
</div>
<div class="paragraph">
<p><span class="small">Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</span></p>
</div>
<div class="paragraph">
<p><span class="small">If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD. THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</span></p>
</div>
<div class="paragraph">
<p><span class="small">Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</span></p>
</div>
<div class="paragraph">
<p><span class="small">None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any regulations or registration procedures required by applicable law to make this license enforceable.</span></p>
</div>
<div style="page-break-after: always;"></div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_summary">1. Summary</a>
<ul class="sectlevel2">
<li><a href="#_requirements_research_motivation">1.1. Requirements &amp; Research Motivation</a></li>
<li><a href="#_prior_after_comparison">1.2. Prior-After Comparison</a></li>
<li><a href="#_recommendations_for_future_work">1.3. Recommendations for Future Work</a></li>
<li><a href="#_document_contributor_contact_points">1.4. Document contributor contact points</a></li>
<li><a href="#_foreword">1.5. Foreword</a></li>
</ul>
</li>
<li><a href="#references">2. References</a></li>
<li><a href="#_terms_and_definitions">3. Terms and definitions</a>
<ul class="sectlevel2">
<li><a href="#_abbreviated_terms">3.1. Abbreviated terms</a></li>
</ul>
</li>
<li><a href="#Overview">4. Overview</a>
<ul class="sectlevel2">
<li><a href="#_structure_of_the_activities">4.1. Structure of the activities</a></li>
<li><a href="#_results_detailed_in_next_sections">4.2. Results detailed in next sections</a></li>
</ul>
</li>
<li><a href="#DataModels">5. O&amp;M for Cit Sci</a>
<ul class="sectlevel2">
<li><a href="#_the_gt20_examples">5.1. The GT20 examples</a></li>
<li><a href="#_hackair_examples">5.2. HackAir examples</a></li>
<li><a href="#_grow_example">5.3. GROW example</a></li>
<li><a href="#_future_work">5.4. Future work</a>
<ul class="sectlevel3">
<li><a href="#_how_to_encode_the_procedure">5.4.1. How to encode the procedure.</a></li>
<li><a href="#_avoiding_verbosity_by_defining_a_data_streem">5.4.2. Avoiding verbosity by defining a data streem</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#SOS_architectures">6. SOS architectures</a>
<ul class="sectlevel2">
<li><a href="#_architecture_1_sos_services_integrated_in_a_sos_client">6.1. Architecture 1: SOS services integrated in a SOS client</a></li>
<li><a href="#_architecture_2_sos_services_integrated_in_a_combined_agile_service">6.2. Architecture 2: SOS services integrated in a combined agile service</a></li>
<li><a href="#_architecture_3_sos_service_for_interoperability_and_json_api_for_fast_client">6.3. Architecture 3: SOS service for interoperability and JSON API for fast client</a></li>
</ul>
</li>
<li><a href="#SOS_Server">7. SOS servers</a>
<ul class="sectlevel2">
<li><a href="#_52_north_solution">7.1. 52 North solution</a></li>
<li><a href="#_istsos">7.2. istSOS</a></li>
<li><a href="#_comparison_of_52_north_sos_and_istsos_implementations">7.3. Comparison of 52 North SOS and istSOS implementations</a></li>
<li><a href="#_miramon_sos_server">7.4. MiraMon SOS Server</a></li>
<li><a href="#_grow_sos_server_implementation">7.5. GROW SOS server implementation</a>
<ul class="sectlevel3">
<li><a href="#_getcapabilities">7.5.1. GetCapabilities</a></li>
<li><a href="#_getobservation">7.5.2. GetObservation</a></li>
<li><a href="#_getfeatureofinterest">7.5.3. GetFeatureOfInterest</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#SOS_Client">8. SOS clients</a>
<ul class="sectlevel2">
<li><a href="#_grow_client">8.1. Grow Client</a></li>
<li><a href="#_miramon_client">8.2. MiraMon Client</a></li>
<li><a href="#_52north_helgoland_sensor_web_viewer">8.3. 52°North Helgoland Sensor Web Viewer</a></li>
<li><a href="#_sos_technology_integration_experiments">8.4. SOS Technology Integration Experiments</a></li>
</ul>
</li>
<li><a href="#DataQuality">9. Data quality estimations in the client side</a>
<ul class="sectlevel2">
<li><a href="#_quality_estimation_on_vector_data">9.1. Quality estimation on vector data</a>
<ul class="sectlevel3">
<li><a href="#_how_data_quality_is_presented">9.1.1. How data quality is presented</a></li>
<li><a href="#_how_to_start_computing_data_quality">9.1.2. How to start computing data quality</a></li>
<li><a href="#_case_1_positional_accuracy_of_the_layer_from_observation_uncertainties">9.1.3. Case 1: Positional accuracy of the layer from observation uncertainties</a></li>
<li><a href="#_case_2_logical_consistency_of_the_thematic_attributes">9.1.4. Case 2: Logical consistency of the thematic attributes</a></li>
<li><a href="#_case_3_temporal_validity_of_the_observation_date">9.1.5. Case 3: Temporal validity of the observation date</a></li>
<li><a href="#_case_4_validity_of_the_positions_of_observations_by_bounding_box">9.1.6. Case 4: Validity of the positions of observations (by bounding box)</a></li>
</ul>
</li>
<li><a href="#_quality_estimation_on_raster_data">9.2. Quality estimation on raster data</a>
<ul class="sectlevel3">
<li><a href="#_confusion_matrix">9.2.1. Confusion matrix</a></li>
</ul>
</li>
<li><a href="#_future_work_2">9.3. Future work</a></li>
</ul>
</li>
<li><a href="#DefinitionServer">10. Definition Server</a>
<ul class="sectlevel2">
<li><a href="#_what_the_definition_server_does">10.1. What the definition server does.</a></li>
<li><a href="#_interoperability_in_the_definition_server">10.2. Interoperability in the definition server</a>
<ul class="sectlevel3">
<li><a href="#_content_interoperability">10.2.1. Content interoperability</a></li>
<li><a href="#_encoding_interoperability">10.2.2. Encoding Interoperability</a></li>
</ul>
</li>
<li><a href="#_using_the_definitions_server">10.3. Using the Definitions Server</a>
<ul class="sectlevel3">
<li><a href="#_uri_access">10.3.1. URI access</a></li>
<li><a href="#_conceptschemes_collections_and_semantics">10.3.2. ConceptSchemes, Collections and Semantics</a></li>
<li><a href="#_search">10.3.3. Search</a></li>
<li><a href="#_downloading_data">10.3.4. Downloading Data</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#SSO">11. User and Application Federation</a>
<ul class="sectlevel2">
<li><a href="#_the_landsense_authorization_server">11.1. The LandSense Authorization Server</a>
<ul class="sectlevel3">
<li><a href="#SSOLevelsOfPrivacy">11.1.1. Levels of personal information</a></li>
<li><a href="#_how_to_register_an_application">11.1.2. How to register an application</a></li>
</ul>
</li>
<li><a href="#_landsense_engagement_platform">11.2. LandSense Engagement Platform</a></li>
<li><a href="#_scent_harmonization_platform">11.3. Scent Harmonization Platform</a></li>
<li><a href="#_scent_explore">11.4. Scent Explore</a></li>
<li><a href="#_scent_measure">11.5. Scent Measure</a></li>
<li><a href="#_nimmbus_geospatial_user_feedback">11.6. NiMMBus Geospatial User Feedback</a></li>
</ul>
</li>
<li><a href="#CitSciGEOSS">12. Connecting Citizen Science data sets to GEOSS</a>
<ul class="sectlevel2">
<li><a href="#_connecting_a_single_citizen_science_project_to_geoss">12.1. Connecting a single Citizen Science project to GEOSS</a></li>
<li><a href="#_why_a_case_by_case_registration_is_not_the_best_way_forward">12.2. Why a case-by-case registration is not the best way forward</a></li>
<li><a href="#_how_to_improve_the_connection_of_citizen_science_into_geoss">12.3. How to improve the connection of Citizen Science into GEOSS</a>
<ul class="sectlevel3">
<li><a href="#_provide_technical_support_to_connect_to_the_geoss_platform">12.3.1. Provide technical support to connect to the GEOSS platform</a></li>
<li><a href="#_federate_multiple_citizen_science_projects_and_their_endpoints_into_a_single_access_point">12.3.2. Federate multiple Citizen Science projects and their endpoints into a single access point</a></li>
<li><a href="#_improve_networking_and_capacity_building">12.3.3. Improve networking and capacity building</a></li>
</ul>
</li>
<li><a href="#_future_work_regarding_to_the_geoss_integration">12.4. Future work regarding to the GEOSS integration</a>
<ul class="sectlevel3">
<li><a href="#GEO-privacy">12.4.1. Citizen privacy and protection</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Scent-Landsense">Appendix A: Integration between SCENT &amp; LandSense</a></li>
<li><a href="#RevisionHistory">Appendix B: Revision History</a></li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>1. Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Engineering report describes the first phase of the citizen science Interoperability experiment organized by the EU H2020 WeObserve project under the OGC innovation program and supported by the four H2020 Citizen Observatories projects (SCENT, GROW, LandSense &amp; GroundTruth 2.0) as well as the EU H2020 NEXTGEOSS project. The activity covered aspects of data sharing architectures for citizen science data, data quality, data definitions and user authentication.</p>
</div>
<div class="paragraph">
<p>The final aim was to propose solutions on how Citizen Science data could be integrated in the Global Earth Observation System of Systems (GEOSS). The solution is necessarily a combination of technical and networking components, being the first ones the focus of this work. The applications of international geospatial standards in current citizen science and citizen observatory projects to improve interoperability and foster innovation is one of the main tasks in during the experiment to achieve the final aim.</p>
</div>
<div class="paragraph">
<p>The main results of the activity was to demonstrate that Sensor Observing Services can be used for citizen science data (as proposed in the OGC SWE4CS discussion paper) by implementing it in several clients and server that has been combined to show Citizen Science observations. In addition an authentication server was used to create a federation between three projects. This federated approach is part of the proposed solution for GEOSS that can be found in the last chapter. Many open issues has been identified and are expected to be addressed in the second phase of the experiment, including the use of a definitions server.</p>
</div>
<div class="sect2">
<h3 id="_requirements_research_motivation"><a class="anchor" href="#_requirements_research_motivation"></a>1.1. Requirements &amp; Research Motivation</h3>
<div class="paragraph">
<p>This experiment was designed to demonstrate how current ICT-based tools can be applied together to allow better citizen participation in CS projects and enable better reuse of the data gathered. Citizen Science is highly transdisciplinary and heterogeneous by nature, and current standardization efforts already occur in the OGC (e.g. addressing data model and sharing issues) as well as outside the OGC (primarily addressing project descriptions and data set metadata). Citizen Science projects might benefit from concrete examples  and best practices  required to achieve the full benefits of interoperability. OGC is in the ideal position to develop and provide such best practice guidance to the international community. Developed solutions in this IE should be applicable to most Citizen Science projects. Findings from this IE will be generalized in this manner and might set the basis for additional experimentation in the future.</p>
</div>
<div class="paragraph">
<p>The FP7 Citizen Observatory Web (COBWEB) project was the first to propose the use of SWE in CS. This work resulted in an OGC public discussion paper available on the OGC website (OGC 16-129). The discussion paper describes a data model for the standardized exchange of citizen science sampling data based on SWE standards. This discussion paper was the initial motivation for this IE.</p>
</div>
<div class="paragraph">
<p>On the other hand, the Citizen Science Association’s International Working Group on Citizen Science Data and Metadata that developed the (PPSR-Core), the European Citizen Science Association (ECSA) has a working group that recognizes the value of standardization in the CS activities (supported by a COST Action). However, these activities could benefit from some experimentation that would be able to suggest common best practices while recognizing the particularities and current approaches in different thematic domains, such as biodiversity monitoring. Citizen Science can complement authoritative in-situ observations and fill the information gaps in numerous scientific disciplines that could be essential for informed decision making. In that sense, the way Citizen Science can be integrated into The Global Earth Observation System of Systems (GEOSS) (including GEOSS-Data Core as the pool to promote and share open and free data) is still under investigation.</p>
</div>
<div class="paragraph">
<p>The 'Ecosystem of Citizen Observatories (CO) for Environmental Monitoring' — WeObserve project is a Horizon 2020 funded project focused on improving the coordination between existing COs and related regional, European and international activities. WeObserve tackles three key challenges that face COs: awareness, acceptability and sustainability. The CoP3 is about Interoperability of Citizen Science projects. WeObserve project – via its CoP activities – has represented an opportunity to promote interoperability experiment in collaboration with the OGC. Such collaboration would address  questions raised in the SWE4CS discussion. In addition, it offers the possibility to directly feed the results into the OGC relevant standards and promotes their usage within GEOSS (as an important user community of OGC standards).</p>
</div>
<div class="paragraph">
<p>In anticipation of the 50th Anniversary of Earth Day in 2020, Earth Day Network, the Woodrow Wilson International Center for Scholars, and the U.S. Department of State, through the Eco-Capitals Forum, announce Earth Challenge 2020, a Citizen Science Initiative. This initiative is in collaboration with Connect4Climate – World Bank Group, Conservation X Labs, Hult Prize, National Council for Science and the Environment (NCSE), Open Geospatial Consortium (OGC), Reset, SciStarter, UN Environment and others to be announced. Earth Challenge 2020 will help engage millions of global citizens in collecting one billion data points in areas including air quality, water quality, biodiversity, pollution and human health. Earth Change 2020 data will be shared through the GEOSS Portal.</p>
</div>
<div class="paragraph">
<p>A precise descriptions of the requirements that have been addressed by the work documented in this Engineering Report; together with the research motivation that answers the fundamental question: What motivated us to address this topic in this report?</p>
</div>
</div>
<div class="sect2">
<h3 id="_prior_after_comparison"><a class="anchor" href="#_prior_after_comparison"></a>1.2. Prior-After Comparison</h3>
<div class="paragraph">
<p>This is the first Citizen Science interoperability experiment conducted by the OGC. Prior to this activity there was a proposed discussion paper on how to apply the SWE standards in Citizen Science (SWE4CS). This experiment positively tested the proposed route using Sensor Observing Services but also has open the door to future exploration fo SensorThings API.
Prior this activity there was a H2020 project with a Authentication Service and after the activity three H2020 formed a bigger federation demonstrating the route to federating and aggregating Citizen Science projects to contribute to GEO objectives.
This work is relevant to the OGC Citizen Science Domain Working Group.</p>
</div>
</div>
<div class="sect2">
<h3 id="_recommendations_for_future_work"><a class="anchor" href="#_recommendations_for_future_work"></a>1.3. Recommendations for Future Work</h3>
<div class="paragraph">
<p>This OGC Interoperability Experiment ended on June 2019, but a second IE is foreseen for next year.</p>
</div>
<div class="paragraph">
<p>New possible topics for next IE to be discussed among the members include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is a need for clarifying how to coordinate infrastructures for citizen science in Europe, and adopt standard procedures for data sharing and single sign on. Solving this issue will help in connecting CitSci to GEO. Steffen Fritz (IIASA) has proposed a side event in the next EuroGEOSS workshop to discuss this with the relevant players. This is emerging as a new activity in the WeObserve Interoperability Community of Practice that is related but not directly connected to the IEs.</p>
</li>
<li>
<p>The WMO (World Meteorological Organization) is concerned about the amount of different CitSci activities that are being organized by meteorological organizations. It is looking for ways of taking advantage of this new data stream but problems of standardization of what is measured and how data is being shared arise. WMO has detected the potential of these data streams and would like to harmonize the situations to make data more useful for weather predictions in the future.</p>
</li>
<li>
<p>OGC is promoting a new generation of web services based on OpenAPI. It is unclear how this could impact the use of OGC standards by CitSci projects but it is seen as an opportunity to make OGC standards more usable and compatible with IT mainstream. A hackathon to develop OGC API specifications is organized on June 20-21 in London.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The definition of the follow up IE will start in June when the first one will finalize and the ER is produced.</p>
</div>
<div class="paragraph">
<p>This section should answer the question: What does this ER mean for the Working Group and OGC in general? What aspects shall be addressed next? In any specific order? What actions are necessary?</p>
</div>
<div class="paragraph">
<p>This is a write up for why this ER should be important to the working group and OGC. This paragraph provides recommendations on how to further proceed with the achievements documented in this ER.</p>
</div>
</div>
<div class="sect2">
<h3 id="_document_contributor_contact_points"><a class="anchor" href="#_document_contributor_contact_points"></a>1.4. Document contributor contact points</h3>
<div class="paragraph">
<p>All questions regarding this document should be directed to the editor or the contributors:</p>
</div>
<div class="paragraph">
<p><strong>Contacts</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Organization</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joan Maso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UAB-CREAF</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andy Cobley</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">University of Dundee</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valantis Tsiakos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Institute of Communication &amp; Computer Systems (ICCS)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nikolaos Tousert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Institute of Communication &amp; Computer Systems (ICCS)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Theodoros Theodoropoulos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Institute of Communication &amp; Computer Systems (ICCS)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simon Jirka</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52 North</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sven Schade</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">European Commission, Joint Research Center (JRC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andreas Matheus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secure Dimensions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stefano Tamascelli</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XTeam Software Solutions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Friederike Klan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Citizen Science Group, Institute of Data Science, DLR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trupti Padiya</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Citizen Science Group, Institute of Data Science, DLR, Friedrich-Schiller-University Jena</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Initiators</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Organization</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universtat Autònoma de Barcelona - CREAF (UAB-CREAF)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">International Institute for Applied Systems Analysis (IIASA)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joint Research Center (JRC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">European Space Agency (ESA)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Woodrow Wilson International Center for Scholars (Wilson Center)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The WeObserve project has received funding from the European Union’s Horizon 2020 Research and Innovation Programme under grant agreement No. 776740.
This presentation reflects only the author&#8217;s views and the EU Agency is not responsible for any use that may be made of the information it contains.</p>
</div>
</div>
<div class="sect2">
<h3 id="_foreword"><a class="anchor" href="#_foreword"></a>1.5. Foreword</h3>
<div class="paragraph">
<p>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>2. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents are referenced in this document.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://portal.opengeospatial.org/files/?artifact_id=41579">OGC 10-004r3, Topic 20: Observations and Measurements</a></p>
</li>
<li>
<p><a href="http://portal.opengeospatial.org/files/?artifact_id=41510">OGC 10-025r1, Observations and Measurements - XML Implementation</a></p>
</li>
<li>
<p><a href="https://portal.opengeospatial.org/files/64910">OGC 15-100r1, OGC Observations and Measurements – JSON implementation</a></p>
</li>
<li>
<p><a href="https://portal.opengeospatial.org/files/?artifact_id=47599">OGC 12-006, OGC® Sensor Observation Service Interface Standard v2.0</a></p>
</li>
<li>
<p><a href="http://portal.opengeospatial.org/files/?artifact_id=41157">OGC 08-094r1, OGC® SWE Common Data Model Encoding Standard	v2.0</a></p>
</li>
<li>
<p><a href="http://docs.opengeospatial.org/is/15-042r5/15-042r5.html">15-042r5 OGC TimeseriesML – XML Encoding of the Timeseries Profile of Observations and Measurements v1.2</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Even if the following is an OGC discussion paper that is not an OGC standard and cannot be considered strictly a normative reference, it is actually the bases for several sections of this document and should be considered as and important background:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://portal.opengeospatial.org/files/?artifact_id=70328">OGC 16-129, Standardized Information Models to Optimize Exchange, Reusability and Comparability of Citizen Science Data (SWE4CS)</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions"><a class="anchor" href="#_terms_and_definitions"></a>3. Terms and definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For the purposes of this report, the definitions specified in Clause 4 of the OWS Common Implementation Standard <a href="https://portal.opengeospatial.org/files/?artifact_id=38867&amp;version=2">OGC 06-121r9</a> shall apply. In addition, the following terms and definitions apply.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Citizen Observatory (CO)</p>
<div class="literalblock">
<div class="content">
<pre>COs are community-based environmental monitoring and information systems, that invite individuals to share observations, typically via mobile phone or the web (from: https://www.weobserve.eu/about/citizen-observatories)</pre>
</div>
</div>
</li>
<li>
<p>Citizen Science
The collection and analysis of data relating to the natural world by members of the general public, typically as part of a collaborative project with professional scientists (from: <a href="https://www.uen.org/crowdandcloud/citizen.shtml" class="bare">https://www.uen.org/crowdandcloud/citizen.shtml</a>)</p>
</li>
<li>
<p>Citizen Science Association</p>
<div class="literalblock">
<div class="content">
<pre>A network that seeks to promote and advance citizen science in a region or around the world. Examples are the American Citizen Science Association (CSA), The European Citizen Science Association (ECSA) or even the Citizen Science Global Partnership (CSGP)</pre>
</div>
</div>
</li>
<li>
<p>Citizen Science Federation</p>
<div class="literalblock">
<div class="content">
<pre>A network of Citizen Science that aims to aggregate innovative EO technologies, mobile devices, community-based environmental monitoring, data collection, interpretation and information delivery systems to empower communities to monitor and report on their environment. An example of this is the The LandSense Federation</pre>
</div>
</div>
</li>
<li>
<p>Community of Practice (CoP)</p>
<div class="literalblock">
<div class="content">
<pre>Community which work to consolidate practice-based knowledge of COs sharing information and resources as well as developing guidelines and toolkits for COs (from: https://www.weobserve.eu/cops/)</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_abbreviated_terms"><a class="anchor" href="#_abbreviated_terms"></a>3.1. Abbreviated terms</h3>
<div class="ulist">
<div class="title">NOTE: The abbreviated terms clause gives a list of the abbreviated terms and the symbols necessary for understanding this document. All symbols should be listed in alphabetical order. Some more frequently used abbreviated terms are provided below as examples.</div>
<ul>
<li>
<p>CitSciIE Citizen Science Interoperability Experiment</p>
</li>
<li>
<p>CO Citizen Observatory</p>
</li>
<li>
<p>CoP Community of Practice</p>
</li>
<li>
<p>COST European Cooperation in Science and Technology</p>
</li>
<li>
<p>CS Citizen Science</p>
</li>
<li>
<p>CS DWG Citizen Science Domain Working Group</p>
</li>
<li>
<p>CSGP Citizen Science Global Partnership</p>
</li>
<li>
<p>ECSA European Association of Citizen Science</p>
</li>
<li>
<p>EO Earth Observation</p>
</li>
<li>
<p>ICT Information and Communication Technologies</p>
</li>
<li>
<p>IE Interoperability Experiment</p>
</li>
<li>
<p>O&amp;M Observation and Measurements</p>
</li>
<li>
<p>PPSR Public Participation in Scientific Research</p>
</li>
<li>
<p>SOS Sensor Observation Service</p>
</li>
<li>
<p>SSO Single Sign On</p>
</li>
<li>
<p>SWE Sensor Web Enablement</p>
</li>
<li>
<p>SWE4CS Sensor Web Enablement for Citizen Science</p>
</li>
<li>
<p>TC Technical Committee</p>
</li>
<li>
<p>TIE Technology Integration Experiments</p>
</li>
<li>
<p>WPS Web Processing Service</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Overview"><a class="anchor" href="#Overview"></a>4. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Engineering Report focuses on the findings of the first phase of the Citizen Science Interoperability Experiment (CitSciIE).</p>
</div>
<div class="paragraph">
<p>The primary focus of the OGC CitSciIE experiment was to demonstrate the interoperability of Citizen Observatories and Citizen Science (CS) projects and the way OGC standards can be applied to Citizen Science, including possible relationships to other relevant standards from the community. In particular, a subset the originally proposed topics were being addressed based on the participant organizations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The use of OGC standards (e.g. Sensor Web Enablement for Citizen Science SWE4CS) to support data integration among CS projects, and with other sources, esp. authoritative data;</p>
</li>
<li>
<p>The use of ISO standards, and OGC publications, and community resources to document data quality aspects (e.g. UncertML, QualityML);</p>
</li>
<li>
<p>The integration of CS projects/campaigns in a Single Sign-On system (SSO) federation;</p>
</li>
<li>
<p>The relationships between OGC standards and data and metadata standards currently used by Citizen Science projects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The desired outcome of this experiment was to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Successfully demonstrate how OGC standards (e.g. SWE) are applicable to Citizen Science, document available supporting tools, identify the challenges of using OGC SWE standards (or Internet of Things equivalent solutions) within current Citizen Science projects, and propose a way forward. Make recommendations to the Earth Science 2020 initiative on which OGC standards should be utilized to underpin interoperable data collection and sharing.</p>
</li>
<li>
<p>Successfully demonstrate how to estimate Citizen Science data quality and make the quality indicators and conformity available in the document and in supporting tools, and link them to the OGC SWE standards (or Internet of Things equivalent solutions) within current CS projects, and propose a way forward.</p>
</li>
<li>
<p>Determine the security considerations and the available tools to support an SSO federation that helps users in participating in several projects by using a single user account.</p>
</li>
<li>
<p>Assess the possible relationships of OGC standards (e.g. SensorML) with other existing standards in the field (e.g. Public Participation in Scientific Research (PPSR) - Core, the ontology developed by the COST Action on Citizen Science, and the Citizen Science Definition Service (CS-DS) developed in the NextGEOSS project).</p>
</li>
<li>
<p>Satisfy and document the necessary requirements to integrate Citizen Science into Global Earth Observations System of Systems (GEOSS) by using OGC standards.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This IE has been promoted by the OGC Citizen Science Domain Working Group, the WeObserve and NextGEOSS H2020 projects, and The Earth Challenge 2020 project as supported by National Geographic Society. This IE contributes not only to the interoperability and possibly standardization program of the OGC, but also to the Global Earth Observation System of Systems (GEOSS). This work is also relevant to the foundational objectives of the Citizen Science Global Partnership (CSGP). Regional and national Citizen Science Associations will equally benefit from the results of this OGC IE.</p>
</div>
<div class="sect2">
<h3 id="_structure_of_the_activities"><a class="anchor" href="#_structure_of_the_activities"></a>4.1. Structure of the activities</h3>
<div class="paragraph">
<p>The official kick off meeting for the OGC CitSciIE experiment was held on Friday 14th September 2018 at the OGC TC meeting in Stuttgart. Activities have continued until March 2019.</p>
</div>
<div class="paragraph">
<p>During the Kick off meeting of the Experiment the following subgroups emerged:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>V: Vocabularies for organizing Citizen Science projects. There was a discussion on essential variables but also on other kind of practices that can be associated to vocabularies, i.e. on how to publish vocabularies (PublishingDefs) or on defining a list of vocabularies that could be useful to experiment with (observations, project descriptions, general glossaries of terms).</p>
<div class="ulist">
<ul>
<li>
<p>Working item V.1: A list of the current projects that Wilson Center knows that can align with the Earth Challenge topics (air and water quality, pollution, human health and eventually biodiversity) and extraction of a common set of variables they usually cover.</p>
</li>
<li>
<p>Working item V.2: Analysis of data models that contributors in the experiment can bring in: Air quality (HackAir), Biodiversity (Atlas of Living Australia &amp; Natusfera), Mosquito (CREAF), Land Use (IIASA), Phenology (CREAF), Invasive Alien Species (JRC).</p>
</li>
<li>
<p>Working item V.3: Consider the COST action metadata model for inclusions as another vocabulary, this might include a set of definitions of phenomena that are being addressed by CS initiatives (based on the inventory of citizen science activities for environment policies).</p>
</li>
</ul>
</div>
</li>
<li>
<p>D: Data sharing using OGC standards such as O&amp;M and SOS. A pool of services were identified for participating in an interoperability experiment, including SOS services and clients and citizen science project databases and APIs.</p>
<div class="ulist">
<ul>
<li>
<p>Working item D.1: A set of instructions on how a CS project can easily setup an SOS service. It could include 52North implementation and might include MiraMon SOS (with some work in the implementation). It should address the case of a small project contributing to the Earth Challenge 2020.</p>
</li>
<li>
<p>Working item D.2: Create an SOS endpoint for HackAir data with minimum resources</p>
</li>
<li>
<p>Working item D.3: Define the requirements for a data provider that could assist Wilson Center in setting up the challenge database. It should consider upload of data into the system. It seemed to go for a harvest system instead of a federated system. It could describe a possible architecture to allow the dialog between the central database and the small contributing projects. It should impose data sharing requirements (services o APIs) on the central database.</p>
</li>
</ul>
</div>
</li>
<li>
<p>S: Connection between LandSense federation and JRC user system.</p>
<div class="ulist">
<ul>
<li>
<p>Working item S.1: Interoperability test on the integration of LS-SSO and JRC-SSO</p>
</li>
</ul>
</div>
</li>
<li>
<p>Q: Data quality</p>
<div class="ulist">
<ul>
<li>
<p>Working item Q.1: Write a document on perspectives of the different quality aspects: Quality assessment (ISO 19157-QualityML), Quality improvement, Quality plan, Data Management principles (ISO 8001), Quality documentation, Quality communication</p>
</li>
<li>
<p>Working item Q.2: Perfect the quality measurement system based on WPS and SOS harvest by demonstrating the concept in practice. Also include in the SOS harvesting the possibility to have a query for assessing the quality of "views"/"selections"/"fragments" of a dataset.</p>
<div class="ulist">
<ul>
<li>
<p>Connection with: D.2</p>
</li>
</ul>
</div>
</li>
<li>
<p>Working item Q.3: Refine the QualityML vocabulary with new entries considering the work done in Australia</p>
<div class="ulist">
<ul>
<li>
<p>Connection with: D.3</p>
</li>
</ul>
</div>
</li>
<li>
<p>Working item Q.4: Add new entry point the QualityML for other common vocabulary formats like TTL etc.</p>
<div class="ulist">
<ul>
<li>
<p>Connection with: V</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each of the subgroups a chair and the main participants and contributors were identified. Responsible persons were also assigned to each of the working items.</p>
</div>
</div>
<div class="sect2">
<h3 id="_results_detailed_in_next_sections"><a class="anchor" href="#_results_detailed_in_next_sections"></a>4.2. Results detailed in next sections</h3>
<div class="paragraph">
<p>These are the main activities and outcomes of the interoperability experiment detailed by activity.</p>
</div>
<div class="paragraph">
<p><strong>Data sharing using OGC standards such as O&amp;M and SOS</strong></p>
</div>
<div class="paragraph">
<p>This activity has been the most active one. During the testbed the following servers have been deployed: MiraMon SOS server, Grow SOS, DLR istSOS SOS and 52north SOS. Three clients have also been produced: MiraMon SOS browser, Grow SOS data viewer and 52north Helgoland. In the last meeting at the EGU, the group was able to demonstrate interoperability by connecting the SOS clients to the SOS services and showing the data on clients, sometimes mixing data form different services and datasets in a single view. This is the most significant result of the experiment and is being extensively documented in this Engineering Report in sections 5, 6 and 7</p>
</div>
<div class="paragraph">
<p><strong>Data quality</strong></p>
</div>
<div class="paragraph">
<p>Two quality vocabularies have been detected: an Australian work done by Peter Brenton team (<a href="https://github.com/tdwg/bdq" class="bare">https://github.com/tdwg/bdq</a>) and the QualityML vocabulary developed by CREAF in the GeoViQua project. The intention was to do a comparison of both approaches but we were not able to do that in the timeframe of the first interoperability experiment. Section 8 describes the current status of the activity. It is foreseen that the second IE will continue what was started here.</p>
</div>
<div class="paragraph">
<p><strong>Definition server for organizing Citizen Science projects</strong></p>
</div>
<div class="paragraph">
<p>The objective of this activity was to support the Earth Challenge 2020 research questions. The questions were defined during the first month of the experiment and now it is time to analyse them in terms of data needs and thematic vocabularies they are going to use. That is the reason this activity has not resulted in tangible outputs and will be reintroduced in the second interoperability experiment. Details of this development are described in section 9.</p>
</div>
<div class="paragraph">
<p><strong>Connection between LandSense federation and other user systems</strong></p>
</div>
<div class="paragraph">
<p>Secure Dimensions (Andreas Matheus) was very active in providing demonstrations and information on how the LandSense federation works and how other projects can be included in the federation and use the Single-Sign-On (SSO) facility. Unfortunately, no other member of the CoP had the resources to apply the SSO on their services or clients and take advantage of the LandSense offering. The activity resulted in a video demonstration that is publicly available here: <a href="https://portal.opengeospatial.org/files/?artifact_id=81550" class="bare">https://portal.opengeospatial.org/files/?artifact_id=81550</a>.
Section 11 Details the current status of the activity.</p>
</div>
<div class="paragraph">
<p><strong>Other</strong></p>
</div>
<div class="paragraph">
<p>Section 11 summarizes the lessons learned that can be applied to GEOSS.</p>
</div>
<div class="paragraph">
<p>In addition to these activities, another activity about quality annotating scientific documentation in a standard way was proposed by Lucy Bastin. A video was recorded that summarizes the idea: <a href="https://portal.opengeospatial.org/files/?artifact_id=82544" class="bare">https://portal.opengeospatial.org/files/?artifact_id=82544</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DataModels"><a class="anchor" href="#DataModels"></a>5. O&amp;M for Cit Sci</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In a <em>feature model</em> all characteristics of a feature are considered properties of the feature and are not semantically separated at the abstract level.</p>
</div>
<div class="paragraph">
<p>The Observations and Measurements(O&amp;M) standard (OGC 10-004r3, Topic 20: Observations and Measurements) defines a data model that observations where.  main concepts are separated as represented in the <a href="#img-observationConcepts">Figure 1</a>:</p>
</div>
<div id="img-observationConcepts" class="imageblock">
<div class="content">
<img src="images/observationConcepts.png" alt="Observation main concepts">
</div>
<div class="title">Figure 1. Observation main concepts</div>
</div>
<div class="paragraph">
<p>For each observation, the O&amp;M allows us to document the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Where the observation is located: Even if the observations was done remotely with a camera or a drone, it is commonly more relevant to know the position of the observed phenomena (the sensor position can also be recorded).</p>
</li>
<li>
<p>When the observation took place and what time period it represents: Even if samples were collected and analyzed later, it is commonly more relevant to know the instant or period of the observed phenomenon.</p>
</li>
<li>
<p>How the observation was done: This will describe the procedure and instrument used to capture the phenomenon.</p>
</li>
<li>
<p>Who did the observation: The procedure and instrument used to capture the phenomenon was installed or used on side by someone. In citizen Science, where many observers contribute small pieces of information that together will form a dataset, it is particularly important to record at least an observer identifier.</p>
</li>
<li>
<p>What was measured: This will define the property names and units of measure of the variables observed.</p>
</li>
<li>
<p>What data was collected: This will record the actual values of the properties measured.</p>
</li>
<li>
<p>What is the expected quality of the observation: If an estimation of the quality of the observation was done, it is important to document it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the O&amp;M data model, there aspects are clearly separated semantically as shown in <a href="#img-commonModelForOandM">Figure 2</a>. This is the main value of the O&amp;M model and its usage SOS (or the SensorThingsAPI that uses a very similar approach to model the data), but it is also the main handicap in applying the standard.</p>
</div>
<div id="img-commonModelForOandM" class="imageblock">
<div class="content">
<img src="images/commonModelForOandM.png" alt="Common Model For Oservations and Measurements">
</div>
<div class="title">Figure 2. Common Model For Oservations and Measurements</div>
</div>
<table id="table_OandMModel" class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 1. Concepts in an observation mapped to the O&amp;M model</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Concept</th>
<th class="tableblock halign-left valign-top">O&amp;M</th>
<th class="tableblock halign-left valign-top">type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureOfInterest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GFI_Feature</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">When</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">phenomenonTime, resultTime</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">How</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">procedure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OM_Process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">procedure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OM_Process</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">What</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">observedProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GF_PropertyType</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quality</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">resultQuality</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Even if this aspects are separated, the O&amp;M model gives a lot of flexibility in defining the properties and this flexibility can condition  interoperability when trying to combine data from different sources. The standard give us freedom to select among the different geometries provided by GML to define the featureOfInterest. The standard gives us even more freedom on the data collected that can have any imaginable structure.</p>
</div>
<div class="paragraph">
<p>That is the reason why the data model used to represent the data gathered by a Citizen Observatory need to be carefully considered before even starting the first campaign. Data models can be designed in UML for clarity but they are later encoded in XML. XML is the only official encoding that O&amp;M referenced in the OGC website (OGC 10-025r1 Observations and Measurements - XML Implementation v2.0). Nevertheless, there is JSON alternative discussed in a OGC discussion paper (OGC 15-100r1 OGC Observations and Measurements – JSON implementation) that does not represent an official position of the OGC but can be implemented anyway. As it will be discussed latter, the interpretation of long XML files might be to slow in web browsers, and, in this cases, a JSON encodings is regarded as a good alternative. This alternative can be the proposed OGC 15-100r1 or the alternative proposed by the SensorThings API.</p>
</div>
<div class="sect2">
<h3 id="_the_gt20_examples"><a class="anchor" href="#_the_gt20_examples"></a>5.1. The GT20 examples</h3>
<div class="paragraph">
<p>In the Ground Truth 2.0 project we have been using the MiraMon implementation of O&amp;M. This implementation assumes a simplified situation that considers that each observation can be represented by a single row in a CSV or in a single record of a database table. Coordinates are represented as a single point. In this situation, we select which column names represent the <em>phonomenonTime</em>, the <em>procedure</em> (that actually is including the user name) and the <em>featureOfInterest</em> (the coordinates). The rest of the columns are considered part of the data record that needs to be provided as the <em>result</em>.</p>
</div>
<div class="paragraph">
<p>The section 8.2.1 of the OGC 08-094r1, OGC® SWE Common Data Model Encoding Standard v2.0 describes a way to encode a <em>DataRecord</em> as an array of fields that can numbers, strings, dates, etc. In our simplified assumption, this results ideal to wrap the properties of the observations that cannot be mapped to any other O&amp;M aspect. This practice is consistent with the section 7.2.8 of the SWE4CS discussion paper.</p>
</div>
<div class="paragraph">
<p>The following is an example of how a water quality observation is represented following the O&amp;M model and encoded in XML:</p>
</div>
<div class="listingblock">
<div class="title">Example of XML encoding of the water quality observation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;om:OM_Observation</span> <span class="attribute-name">gml:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vatten-fokus_2_1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;om:type</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_ComplexObservation</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:procedure</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/procedure/22655</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:observedProperty</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/observedProperty</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:featureOfInterest</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/featureOfInterest/2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:result</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">swe:DataRecordPropertyType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;swe:DataRecord&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CREA_DATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Creation_Date</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>07/12/2018 17:23<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Text&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SITE_NAME</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Site_name</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>Dunkershall. V¤gtrumma uppst¤ms.<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Text&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LAND_USE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Land_use_in_the_immediate_surroundings</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>Agriculture<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Text&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">BANK_VEGE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Bank_vegetation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>Grass<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Text&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NITRATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/NITRATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>1.50<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PHOSPHATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/PHOSPHATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>0.075<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WATER_COLOR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Estimated_water_colour</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;swe:value&gt;</span>Colourless<span class="tag">&lt;/swe:value&gt;</span>
                                <span class="tag">&lt;/swe:Text&gt;</span>
                        <span class="tag">&lt;/swe:field&gt;</span>
                <span class="tag">&lt;/swe:DataRecord&gt;</span>
        <span class="tag">&lt;/om:result&gt;</span>
<span class="tag">&lt;/om:OM_Observation&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of how two  air quality observations are represented following the O&amp;M model and encoded in JSON:</p>
</div>
<div class="listingblock">
<div class="title">Example of encoding of the air quality observation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">meet-mee-mechelen_1_0</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_ComplexObservation</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">phenomenonTime</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-11-19 17:20:00+01</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">resultTime</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-11-19 17:20:00+01</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">procedure</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/procedure/5</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">observedProperty</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/observedProperty</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">featureOfInterest</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/featureOfInterest/1</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">DataRecord</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>:[
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">CAMPAIGN</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Text</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/field/CAMPAIGN</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Oct-Nov2017</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">3155</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_mi</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_mi</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">80</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_ma</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_ma</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">16413</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_st</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_st</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">3398</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">uncertaint</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/uncertaint</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">0.50</span><span class="delimiter">&quot;</span></span>
                        }
                ]
        }
},
{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">meet-mee-mechelen_2_1</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_ComplexObservation</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">phenomenonTime</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-11-19 17:20:06+01</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">resultTime</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-11-19 17:20:06+01</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">procedure</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/procedure/5</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">observedProperty</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/observedProperty</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">featureOfInterest</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/featureOfInterest/2</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">DataRecord</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>:[
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">CAMPAIGN</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Text</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/field/CAMPAIGN</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Oct-Nov2017</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">time_first</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Text</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/field/time_first</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-11-06 08:00:18+01</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">3382</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_mi</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_mi</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">80</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_ma</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_ma</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">17256</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">bc_aggr_st</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/bc_aggr_st</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">3663</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">number_of_</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/number_of_</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">25</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">number_o_1</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/number_o_1</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">13</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">mean_numbe</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/mean_numbe</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span>
                        },
                        {
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">uncertaint</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Quantity</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">definition</span><span class="delimiter">&quot;</span></span> :<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/meet-mee-mechelen/variable/uncertaint</span><span class="delimiter">&quot;</span></span>,
                                <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">0.50</span><span class="delimiter">&quot;</span></span>
                        }
                ]
        }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These examples were produced by SOS requests to this URL: <a href="http://www.ogc3.uab.cat/cgi-bin/CitSci/MiraMon.cgi?" class="bare">http://www.ogc3.uab.cat/cgi-bin/CitSci/MiraMon.cgi?</a>. A client connecting to this service can be found here: <a href="http://www.ogc3.uab.cat/gt20/" class="bare">http://www.ogc3.uab.cat/gt20/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_hackair_examples"><a class="anchor" href="#_hackair_examples"></a>5.2. HackAir examples</h3>
<div class="paragraph">
<p>To illustrate the flexibility of the O&amp;M we have included this air quality report that shows how HackAir data is presented by a 52North SOS implementation. In this case the <em>result</em> presents a single numerical value while the other information is provided as parameters. This approach is consistent with section 7.2.2.5 of the O&amp;M standard.</p>
</div>
<div class="listingblock">
<div class="title">Example of encoding of the water quality observation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;om:OM_Observation</span> <span class="attribute-name">gml:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">o_499</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;om:type</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:phenomenonTime&gt;</span>
                <span class="tag">&lt;gml:TimeInstant</span> <span class="attribute-name">gml:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">phenomenonTime_499</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;gml:timePosition&gt;</span>2019-01-01T00:00:12.000Z<span class="tag">&lt;/gml:timePosition&gt;</span>
                <span class="tag">&lt;/gml:TimeInstant&gt;</span>
        <span class="tag">&lt;/om:phenomenonTime&gt;</span>
        <span class="tag">&lt;om:resultTime</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#phenomenonTime_499</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:procedure</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sensors_arduino_1000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:parameter&gt;</span>
                <span class="tag">&lt;om:NamedValue&gt;</span>
                        <span class="tag">&lt;om:name</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PM2.5_AirPollutantIndex</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:value</span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>bad<span class="tag">&lt;/om:value&gt;</span>
                <span class="tag">&lt;/om:NamedValue&gt;</span>
        <span class="tag">&lt;/om:parameter&gt;</span>
        <span class="tag">&lt;om:parameter&gt;</span>
                <span class="tag">&lt;om:NamedValue&gt;</span>
                        <span class="tag">&lt;om:name</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/param-name/OGC-OM/2.0/samplingGeometry</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:value</span> <span class="attribute-name">xmlns:ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/gml/3.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ns:GeometryPropertyType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;ns:Point</span> <span class="attribute-name">ns:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Point_sp_45C0E376C40E98E8EC0D48C05F7558C2FFD15245</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                        <span class="tag">&lt;ns:pos</span> <span class="attribute-name">srsName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/crs/EPSG/0/4326</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>52.063269625917 4.5077472925186<span class="tag">&lt;/ns:pos&gt;</span>
                                <span class="tag">&lt;/ns:Point&gt;</span>
                        <span class="tag">&lt;/om:value&gt;</span>
                <span class="tag">&lt;/om:NamedValue&gt;</span>
        <span class="tag">&lt;/om:parameter&gt;</span>
        <span class="tag">&lt;om:parameter&gt;</span>
                <span class="tag">&lt;om:NamedValue&gt;</span>
                        <span class="tag">&lt;om:name</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:value</span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>sensors_arduino<span class="tag">&lt;/om:value&gt;</span>
                <span class="tag">&lt;/om:NamedValue&gt;</span>
        <span class="tag">&lt;/om:parameter&gt;</span>
        <span class="tag">&lt;om:parameter&gt;</span>
                <span class="tag">&lt;om:NamedValue&gt;</span>
                        <span class="tag">&lt;om:name</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:value</span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xs:string</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>sID :1000<span class="tag">&lt;/om:value&gt;</span>
                <span class="tag">&lt;/om:NamedValue&gt;</span>
        <span class="tag">&lt;/om:parameter&gt;</span>
        <span class="tag">&lt;om:observedProperty</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PM2.5_AirPollutantValue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xlink:title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PM2.5_AirPollutantValue</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:featureOfInterest</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sensors_arduino_1000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:result</span> <span class="attribute-name">xmlns:ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/gml/3.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uom</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">μg/m3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ns:MeasureType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>130.67<span class="tag">&lt;/om:result&gt;</span>
<span class="tag">&lt;/om:OM_Observation&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A service producing this type of results can be seen here: <a href="https://nexos.demo.52north.org/52n-sos-hackair-webapp/service" class="bare">https://nexos.demo.52north.org/52n-sos-hackair-webapp/service</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_grow_example"><a class="anchor" href="#_grow_example"></a>5.3. GROW example</h3>
<div class="paragraph">
<p>In the GROW project the SME Hydrologic has develop an SOS service that uses a O&amp;M observation. In this case, a single number is provided as the <em>result</em> of the observation and additional parameters are transported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;OM_Observation</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/om/2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;type</span> <span class="attribute-name">gml:remoteSchema</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;phenomenonTime&gt;</span>
                <span class="tag">&lt;gml:TimePeriod&gt;</span>
                        <span class="tag">&lt;gml:beginPosition&gt;</span>2018-09-03T09:01:38.000Z<span class="tag">&lt;/gml:beginPosition&gt;</span>
                        <span class="tag">&lt;gml:endPosition&gt;</span>2018-09-03T09:01:38.000Z<span class="tag">&lt;/gml:endPosition&gt;</span>
                <span class="tag">&lt;/gml:TimePeriod&gt;</span>
        <span class="tag">&lt;/phenomenonTime&gt;</span>
        <span class="tag">&lt;resultTime&gt;</span>
                <span class="tag">&lt;gml:TimeInstant&gt;</span>
                        <span class="tag">&lt;gml:timePosition&gt;</span>2018-09-03T09:01:38.000Z<span class="tag">&lt;/gml:timePosition&gt;</span>
                <span class="tag">&lt;/gml:TimeInstant&gt;</span>
        <span class="tag">&lt;/resultTime&gt;</span>
        <span class="tag">&lt;procedure&gt;</span>Grow.Thingful.Sensors_je47sfac<span class="tag">&lt;/procedure&gt;</span>
        <span class="tag">&lt;observedProperty</span> <span class="attribute-name">nilReason</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Thingful.Connectors.GROWSensors.AirTemperature</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;featureOfInterest</span> <span class="attribute-name">nilReason</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">je47sfac</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;result&gt;</span>20.64<span class="tag">&lt;/result&gt;</span>
<span class="tag">&lt;/OM_Observation&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_future_work"><a class="anchor" href="#_future_work"></a>5.4. Future work</h3>
<div class="paragraph">
<p>So far we have seen 3 servers using 2 different approaches to represent the result. That is not a problem for a web service (that only outputs data) but it is not the best situation to ensure interoperability at the client side where an integrated client will need to react to any possible encoding variation and deliver the best result.</p>
</div>
<div class="sect3">
<h4 id="_how_to_encode_the_procedure"><a class="anchor" href="#_how_to_encode_the_procedure"></a>5.4.1. How to encode the procedure.</h4>
<div class="paragraph">
<p>The SWE4CS discussion paper suggest that we use an approach to encode the procedure that takes into account a recommendation extracted from section 6.18.1 of Timeseries Profile of Observations and Measurements standard (OGC 15-042r5) that suggests an encoding for both the observation <em>process</em> and the <em>operator</em> of the sensor (the <em>citizen</em> doing Citizen Science) that is based on ISO metadata. This will ensure an uniform way to report on this two important aspects of the observation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This approach has not been implemented during the interoperability experiment but it is considered something we can experiment with in the future. An example of this procedure is provided in the SWE3CS document and reproduced here for convenience
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example of encoding of the procedure (including process and operator) extracted from the SWE4CS document</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;om:procedure&gt;</span>
  <span class="tag">&lt;tsml:ObservationProcess</span> <span class="attribute-name">gml:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">op1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="comment">&lt;!-- processType defines observation performed by human with sensor --&gt;</span>
    <span class="tag">&lt;tsml:processType</span>
<span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/waterml/2.0/processType/Sensor</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- processReference defines sampling protocol --&gt;</span>
    <span class="tag">&lt;tsml:processReference</span>
<span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://dyfi.cobwebproject.eu/skos/JapaneseKnotweedSamplingProtocol</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- if a sensor is used, provide the link to the sensor definition here. Use
SensorML if possible --&gt;</span>
    <span class="tag">&lt;tsml:parameter&gt;</span>
      <span class="tag">&lt;om:NamedValue&gt;</span>
        <span class="tag">&lt;om:name</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/property/OGC/0/SensorType</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;om:value&gt;</span>http://www.motorola.com/XT1068<span class="tag">&lt;/om:value&gt;</span>
      <span class="tag">&lt;/om:NamedValue&gt;</span>
    <span class="tag">&lt;/tsml:parameter&gt;</span>
    <span class="comment">&lt;!-- operator defines the citizen scientist producing this observation --&gt;</span>
    <span class="tag">&lt;tsml:operator&gt;</span>
      <span class="tag">&lt;gmd:CI_ResponsibleParty&gt;</span>
        <span class="tag">&lt;gmd:individualName&gt;</span>
          <span class="tag">&lt;gco:CharacterString&gt;</span>Ingo Simonis<span class="tag">&lt;/gco:CharacterString&gt;</span>
        <span class="tag">&lt;/gmd:individualName&gt;</span>
        <span class="tag">&lt;gmd:organisationName&gt;</span>
          <span class="tag">&lt;gco:CharacterString&gt;</span>OGC<span class="tag">&lt;/gco:CharacterString&gt;</span>
        <span class="tag">&lt;/gmd:organisationName&gt;</span>
        <span class="tag">&lt;gmd:role&gt;</span>
          <span class="tag">&lt;gmd:CI_RoleCode</span>
    <span class="attribute-name">codeList</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">codeListValue</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">resourceProvider</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/gmd:role&gt;</span>
      <span class="tag">&lt;/gmd:CI_ResponsibleParty&gt;</span>
    <span class="tag">&lt;/tsml:operator&gt;</span>
  <span class="tag">&lt;/tsml:ObservationProcess&gt;</span>
<span class="tag">&lt;/om:procedure&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is quite verbose what might affect performance when many data is transmitted.</p>
</div>
</div>
<div class="sect3">
<h4 id="_avoiding_verbosity_by_defining_a_data_streem"><a class="anchor" href="#_avoiding_verbosity_by_defining_a_data_streem"></a>5.4.2. Avoiding verbosity by defining a data streem</h4>
<div class="paragraph">
<p>An approach based on providing a coma separated recordset that is described only once at the beginning should be more compact and efficient to parse.</p>
</div>
<div class="paragraph">
<p>The section 8.4.3 of the OGC 08-094r1, OGC® SWE Common Data Model Encoding Standard v2.0 describes a way to encode a <em>DataStream</em> only once and then send the data directly as a CSV format using HTTP of other protocol. A similar solution could be worth to be tested in the future to increase performance.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SOS_architectures"><a class="anchor" href="#SOS_architectures"></a>6. SOS architectures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter we describe three architectures tested in the Interoperability Experiment that demonstrate end to end architectures as well as interoperability among servers and clients.</p>
</div>
<div class="sect2">
<h3 id="_architecture_1_sos_services_integrated_in_a_sos_client"><a class="anchor" href="#_architecture_1_sos_services_integrated_in_a_sos_client"></a>6.1. Architecture 1: SOS services integrated in a SOS client</h3>
<div id="img-MiraMonSOSArchit" class="imageblock">
<div class="content">
<img src="images/MiraMonSOSArchit.png" alt="MiraMon SOS Architechture">
</div>
<div class="title">Figure 3. MiraMon SOS Architechture</div>
</div>
<div class="paragraph">
<p>In this architecture (<a href="#MiraMonSOSArchit">[MiraMonSOSArchit]</a>) the client access directly two different SOS services. It formulates a GetFeatureOfInterest to determine the positions of the individual observations and a GetObservation each time it needed to show a complete description of a single point (the user triggers this event by clicking on an icon) or if it needs to represent different icons as a function of the value of the observation. In this case, interoperability happens directly in the client. Since the SOS requests are communicated to the Internet, this client is exposing requests and response, allowing people to explore the SOS protocol with both the map browser console as well as the browser developing tools.</p>
</div>
<div id="img-MMNConsole" class="imageblock">
<div class="content">
<img src="images/mmn_console.png" alt="MMN console">
</div>
<div class="title">Figure 4. MiraMon Map Browser console with both server requests</div>
</div>
<div id="img-MMNChrome" class="imageblock">
<div class="content">
<img src="images/mmn_chrome.png" alt="Chrome developement tool">
</div>
<div class="title">Figure 5. SOS requests as shown in the Chrome development tool</div>
</div>
<div class="paragraph">
<p>It is worth mentioning that this architecture is only possible if both services are declaring their willingness to be combined in the header of the responses. By default, programatically reading XML or JSON data coming from a Internet domain different from the client itself is not allowed except if the server states in the header that this is allowed. This is known as Cross-Origin Resource Sharing (CORS). The following headers will allow CORS with anybody.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE</pre>
</div>
</div>
<div class="paragraph">
<p>In the case a SOS server does not allow CORS, our client is still able to force a solution by redirecting the request to our server with an extra parameter <em>ServerToRequest</em>. In this case, our server will cascade the request to the specified server and return the response back to the client as if there was only one server involved in only one domain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_architecture_2_sos_services_integrated_in_a_combined_agile_service"><a class="anchor" href="#_architecture_2_sos_services_integrated_in_a_combined_agile_service"></a>6.2. Architecture 2: SOS services integrated in a combined agile service</h3>
<div id="img-GrowSOSArchit" class="imageblock">
<div class="content">
<img src="images/GrowSOSArchit.png" alt="Grow SOS Architechture">
</div>
<div class="title">Figure 6. Grow SOS Architechture</div>
</div>
<div class="paragraph">
<p>In this architecture (<a href="#GrowSOSArchit">[GrowSOSArchit]</a>) a common server pulls two or more SOS requests into a central tabular datastore. This datastore records only the information from the returned SOS data that is required for the final visualisation and removes information that is redundant creating a data warehouse representing only one version of the data. In this approach the interoperability happens internally in the datastore and the SOS requests and responses are not explosed to the final client.
In the diagram below (<a href="#GRowDataFlow">[GRowDataFlow]</a>), data is stored in the datawarehouse and Microsoft&#8217;s PowerBI does the heavy lifting for the visualisation of the combined data sources.</p>
</div>
<div id="img-GRowDataFlow" class="imageblock">
<div class="content">
<img src="images/GRowDataFlow.png" alt="Grow SOS Data Flow">
</div>
<div class="title">Figure 7. Grow SOS Data Flow</div>
</div>
<div class="paragraph">
<p>The common server would typically be a cloud server, but for some clients this is not necessary, in the case of PowerBI a data bridge is created between the data source and the visualisation tool before it is published to a web client.
Other visualisation tools (such as Tableau) will have their own methods of connecting to the data warehouse and publishing the results to a web based client.
In this architecture, data is only as up to date as the latest data pull from the SOS servers; in the case of GROW this is done nightly but this could be made more frequent or moved towards real time using a data log pipeline in a kappa architecture.</p>
</div>
</div>
<div class="sect2">
<h3 id="_architecture_3_sos_service_for_interoperability_and_json_api_for_fast_client"><a class="anchor" href="#_architecture_3_sos_service_for_interoperability_and_json_api_for_fast_client"></a>6.3. Architecture 3: SOS service for interoperability and JSON API for fast client</h3>
<div id="img-HelgolandSOSArchit" class="imageblock">
<div class="content">
<img src="images/HelgolandSOSArchit.png" alt="Helgoland SOS Architechture">
</div>
<div class="title">Figure 8. Helgoland SOS Architechture</div>
</div>
<div class="paragraph">
<p>This architecture was especially optimised to support the development of lightweight Sensor Web applications. This is achieved by avoiding the direct XML encoding/decoding on the client device. Instead, the interactions between the client (in this case the 52°North Helgoland Sensor Web Viewer) and the server components is achieved via a REST and JSON interface (the 52°North Sensor Web API).</p>
</div>
<div class="paragraph">
<p>This API can be directly exposed by Sensor Web servers such as the 52°North implementation. Alternatively, an available proxy component is also capable to encapsulate existing OGC SOS servers behind the lightweight interface of the 52°North Sensor Web API.</p>
</div>
<div class="paragraph">
<p>The advantage of this approach is a more lightweight communication pattern to be implemented on the client side. In addition the 52°North Sensor Web API offers further convenience methods as well as functionalities for reducing the transferred data volume (by generalising observation data) and improving the data visualisation (e.g. providing rending hints). A drawback of this approach is a less direct interaction with SOS servers, so that for integrating new SOS servers, a proxy component has to be configured/adjusted.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SOS_Server"><a class="anchor" href="#SOS_Server"></a>7. SOS servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter we describe four SOS servers tested in the Interoperability Experiment.</p>
</div>
<div class="sect2">
<h3 id="_52_north_solution"><a class="anchor" href="#_52_north_solution"></a>7.1. 52 North solution</h3>
<div class="paragraph">
<p>The 52°North Sensor Web Server comprises several server-side modules which closely interact to provide different kinds data access functionality. In detail, this comprises the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data storage: The database for storing the observation data is integrated through an object-relational mapping layer based on the Hibernate framework. This allows the flexible integration of different types of database management systems (e.g. PostgreSQL, Oracle, MS SQL Server, MySQL) and data models. For this Interoperability Experiment, PostgreSQL was used.</p>
</li>
<li>
<p>For the access to observation data, the server offers three dedicated modules, which use the same common Sensor Web database.</p>
<div class="ulist">
<ul>
<li>
<p>SOS: The SOS module offers a comprehensive implementation of the OGC Sensor Observation Service 2.0 standard (including beyond the core several extended functionalities, transactional and result handling operations). It also offers several interoperability enhancements such as a support of the INSPIRE Technical Guidance on the SOS as a Download Service.</p>
</li>
<li>
<p>SensorThings API: In addition to the SOS support, a dedicated module is available for supporting the OGC SensorThings API Part 1: Sensing (not yet evaluated as part of this Interoperability Experiment).</p>
</li>
<li>
<p>52°North Sensor Web API: Complementary to the previous modules, also the 52°North Sensor Web API is offered. This API offers an additional but optional convenience layer for building client applications. While both the SOS and the SensorThings API standards are well suited for enabling the interoperable access to observation data, the Sensor Web REST-API allows to provide additional functionality that significantly facilitates the development of client applications. Typical examples of this additional functionality comprise: generalisation of observation data (important for developing mobile applications), provision of rendering hints (e.g. styling information for time series), conversion of data to mainstream formats such as CSV.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The URL of the instance used in this IE was: <a href="https://nexos.demo.52north.org/52n-sos-hackair-webapp/service" class="bare">https://nexos.demo.52north.org/52n-sos-hackair-webapp/service</a>.</p>
</div>
<div class="paragraph">
<p>More information about the initiative can be found here: <a href="https://52north.org/software/software-projects/sos/" class="bare">https://52north.org/software/software-projects/sos/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_istsos"><a class="anchor" href="#_istsos"></a>7.2. istSOS</h3>
<div class="paragraph">
<p>istSOS (Istituto Scienze della Terra Sensor Observation Service) is an OGC SOS server implementation written in Python. istSOS allows for managing and dispatch observations from monitoring sensors according to the Sensor Observation Service standard.</p>
</div>
<div class="paragraph">
<p>istSOS evolved in time from being a SOS service provider to complete data management system. But the standard does not account for a number of functionalities that were later included in the software. Some of the extending capabilities are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Handle of irregular time series</p>
</li>
<li>
<p>On-the-fly aggregation of observed measures with no-data management.</p>
</li>
<li>
<p>Capability to filter observations based on partial observed property names ( LIKE filtering support).</p>
</li>
<li>
<p>Native support for data validation and data quality index associated with each observation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The project also provides also a Graphical user Interface that allows for easing the daily operations and a RESTFul Web API for automatizing administration procedures.</p>
</div>
<div class="paragraph">
<p>The URL of the instance used in this IE was: <a href="http://artemis.geogr.uni-jena.de/istsos_ie/soil?service=SOS&amp;request=GetCapabilities&amp;version=1.0.0" class="bare">http://artemis.geogr.uni-jena.de/istsos_ie/soil?service=SOS&amp;request=GetCapabilities&amp;version=1.0.0</a>
More information about the initiative can be found here: <a href="http://istsos.org/" class="bare">http://istsos.org/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_comparison_of_52_north_sos_and_istsos_implementations"><a class="anchor" href="#_comparison_of_52_north_sos_and_istsos_implementations"></a>7.3. Comparison of 52 North SOS and istSOS implementations</h3>
<div class="paragraph">
<p>52 North and istSOS are both RESTful implementations of OGC SOS standard. We provide a short comparison of these tools, which might help end-users to choose a tool based on their requirements.</p>
</div>
<div class="paragraph">
<p>52 North and istSOS both provide support for all core operations defined in the OGC SOS specification. 52 North SOS is a Java based implementation whereas istSOS is a Python based implementation. As they are based on different programming languages, their supported hosting application server differs. In order to deploy 52 North SOS, the end-user can either use Tomcat, Jetty or Glassfish. In order to deploy istSOS, Apache mod_wsgi is required. Both implementations have a restful web interface and support JSON, XML and plain text for data encoding. 52 North offers bindings like KVP, SOAP, POX, and EXI. istSOS offers bindings like KVP and SOAP. They both run on major OS like Windows, Mac and Linux. They both support Postgres/PostGIS as underlying database management system. 52 North implementation also supports database like Oracle, Microsoft SQL Server and MySQL. 52 North implementation provides multilingual support for querying data. istSOS offers automatic notifications via email, twitter or other social media. Both SOS implementations provide a user-friendly graphical interface which includes a built-in client, data viewer and data manager. Both tools come with a detailed documentation with proper examples. They both have a friendly support community which is easily reachable via email and have a supporting emailing list where users can post questions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_miramon_sos_server"><a class="anchor" href="#_miramon_sos_server"></a>7.4. MiraMon SOS Server</h3>
<div class="paragraph">
<p>MiraMon Server is a stand alone CGI application that runs on Windows operating systems that can be used in combination with a web server such as Internet Information Server or Apache for Windows. It is the ideal solution for people that already uses MiraMon professional on desktop because it uses the same MiraMon formats in the back-end. MiraMon server is based on the same libraries that are used by MiraMon professional and has the same capabilities in terms of CRS support, interpolation algorithms, MMZX compression etc. One particularity of the software is the internal tiled schema required to serve maps and tiles in a fast an scalable way. MiraMon Server uses OGC web services as a baseline for the interaction to the client. Currently, MiraMon server provides support for the following standards:
* Web Map Service (all versions)
* Web Map Tile Service (all versions)
* Web Coverage Service (version 1.0)
* Web Feature Service (version 2.0)
* Web Processing Service (version 1.0)
* Sensor Observing Service (version 2.0)</p>
</div>
<div class="paragraph">
<p>The Sensor Observing Service capacity is used in tandem with the Web Feature Service and uses the same MiraMon topologically structured formats in the back-end. It has been developed in the Ground Truth 2.0 project to server interoperable data from the Citizen Observatories created during the project. The current implementation is incomplete and only supports GetFeatureOfInterest and GetOBservation operation with limited capabilities. The objective of the minimum capabilities developed was to repont to the requirements of a viewer client needs to represent a map of the features of interest provided by the service and to allow for a query in a point to get more information about the observations there. Each dataset in MiraMon becomes a observedProperty in the SOS service. Each observation is a position in a PNT file that has a DBF record associated that is transformed to a O&amp;M DataRecord automatically. Internally, it is possible to mark field names in the DBF that are associated to concepts in the O&amp;M such as the phenomenon time and the user name.</p>
</div>
<div class="paragraph">
<p>This is the internal format for the small REL5 document necessary to include the extra information that the server requires.</p>
</div>
<div class="literalblock">
<div class="title">Internal format of the DBF and</div>
<div class="content">
<pre>file name: C:\inetpub\SIWeb\gt20\VattenFokus\VattenFokusT.dbf
Last update on: 24-01-2019
Number of records: 254
Number of fields per record: 32
Character set: Windows ANSI (88, 0x58)

Field characteristics:
-------------------------------------------------------------------------------------------
NUM |               NAME |                                       DESCRIPTOR | T | SIZ | REL
-------------------------------------------------------------------------------------------
  1 |          ID_GRAFIC |       Identificador Gràfic ID | N |   3 |
  2 |            USER_ID |                       User ID | N |   5 |
  3 |          SAMPLE_ID |                     Sample ID | N |   5 |
  4 |          CREA_DATE |                 Creation Date | C |  16 |
  5 |          CHAN_DATE |             Modification date | C |  16 |
  6 |         SAMPLEDATE |                   Sample date | C |  16 |
  7 |           GROUP_ID |                      Group ID | C |  34 |
  8 |          SITE_NAME |                     Site name | C | 111 |
  9 |   Sample_date_time |              Sample date/time | C |  16 |
 10 |      N_PARTICIPANT |  Total number of participants | N |   3 |
 11 |              NOTES |                         Notes | C | 276 |
 12 |         WATER_TYPE |          Freshwater body type | C |   7 |
 13 |   OTHER_WATER_TYPE |    Other freshwater body type | C |  50 |
 14 |           LAND_USE |      Land use in surroundings | C |  17 |
 15 |     OTHER_LAND_USE | Other land use in surrounding | C |  84 |
 16 |          BANK_VEGE |               Bank vegetation | C |  36 |
 17 |    OTHER_BANK_VEGE |         Other bank vegetation | C |  74 |
 18 |           ON_WATER |          On the water surface | C |  30 |
 19 |      POPUT_SOURCES |     Pollution in surroundings | C |  46 |
 20 |          WaterUses |        Evidence of water uses | C |  33 |
 21 |    OTHER_WATER_USE |  Other evidence of water uses | C |  10 |
 22 |       AQUATIC_LIVE |      Evidence of aquatic life | C |  69 |
 23 | OTHER_AQUATIC_LIVE |    Other evidence of aq. life | C |  38 |
 24 |              ALGUE |                Algae presence | C |  16 |
 25 |         WATER_FLOW |      Estimated the water flow | C |   7 |
 26 |        WATER_LEVEL |         Estimated water level | C |   7 |
 27 |            NITRATE |                       Nitrate | N |   4 |
 28 |          PHOSPHATE |                     Phosphate | N |   5 |
 29 |          TURBIDITY |       Water Quality Turbidity | C |   7 |
 30 |             RESULT |                        Result | N |   3 |
 31 |        WATER_COLOR |        Estimated water colour | C |  10 |
 32 |  OTHER_WATER_COLOR |  Other estimated water colour | C |  43 |</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Internal REL5 format to expose a MiraMon topologically structured file as a SOS offering.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">[VERSIO]
Vers=5
SubVers=0

[GetObservation]
GetObsservation_Vers=5
GetOBservation_SubVers=0
Fitxer=MeetMeeMechelenT.rel
CampDataHoraFenomen=time_last
CampNomSensor=street_nam</code></pre>
</div>
</div>
<div class="paragraph">
<p>Final representation as XML O&amp;M of the same structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span>
<span class="tag">&lt;sos:GetObservationResponse</span> <span class="attribute-name">xmlns:sos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/sos/2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xlink</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xlink</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:om</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/om/2.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:gml</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/gml/3.2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:swe</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/swe/2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;sos:observationData&gt;</span>
                <span class="tag">&lt;om:OM_Observation</span> <span class="attribute-name">gml:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vatten-fokus_2_1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;om:type</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_ComplexObservation</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:procedure</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/procedure/22655</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:observedProperty</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/observedProperty</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:featureOfInterest</span> <span class="attribute-name">xlink:href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/featureOfInterest/2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;om:result</span> <span class="attribute-name">xsi:type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">swe:DataRecordPropertyType</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                <span class="tag">&lt;swe:DataRecord&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SAMPLE_ID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/SAMPLE_ID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>45821<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CREA_DATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Creation_Date</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>07/12/2018 17:23<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CHAN_DATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Modification_date</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>07/12/2018 17:23<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SAMPLEDATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Sample_date</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>07/12/2018 15:00<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GROUP_ID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Group_ID</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Dunkern, Group ID: 38438<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SITE_NAME</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Site_name</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Dunkershall. V¤gtrumma uppst¤ms.<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Sample_date_time</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Sample_date/time</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>07/12/2018 15:00<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">N_PARTICIPANT</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/N_PARTICIPANT</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>1<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NOTES</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Notes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>+2 grader C.<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WATER_TYPE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Freshwater_body_type</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Other<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_WATER_TYPE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_freshwater_body_type</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Dike<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LAND_USE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Land_use_in_the_immediate_surroundings</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Agriculture<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_LAND_USE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_the_land_use_in_the_immediate_surroundings</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">BANK_VEGE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Bank_vegetation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Grass<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_BANK_VEGE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_bank_vegetation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ON_WATER</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/On_the_water_surface</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>None<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POPUT_SOURCES</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Pollution_sources_in_the_immediate_surroundings</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Other<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WaterUses</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Evidence_of_water_uses</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_WATER_USE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_evidence_of_water_uses</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AQUATIC_LIVE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Evidence_of_aquatic_life</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_AQUATIC_LIVE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_evidence_of_aquatic_life</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ALGUE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Algae_presence</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>No algae<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WATER_FLOW</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Estimated_the_water_flow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Surging<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WATER_LEVEL</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Estimated_water_level</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Average<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NITRATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/NITRATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>1.50<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PHOSPHATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/PHOSPHATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>0.075<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TURBIDITY</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Water_Quality_Secchi_Tube_(Turbidity).</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="entity">&amp;lt;</span>14<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">RESULT</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Quantity</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/variable/RESULT</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:uom</span><span class="tag">/&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Quantity&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">WATER_COLOR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Estimated_water_colour</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span>Colourless<span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                        <span class="tag">&lt;swe:field</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OTHER_WATER_COLOR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                <span class="tag">&lt;swe:Text</span> <span class="attribute-name">definition</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.opengis.uab.cat/vatten-fokus/field/Other_estimated_water_colour</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                                                        <span class="tag">&lt;swe:value&gt;</span><span class="tag">&lt;/swe:value&gt;</span>
                                                <span class="tag">&lt;/swe:Text&gt;</span>
                                        <span class="tag">&lt;/swe:field&gt;</span>
                                <span class="tag">&lt;/swe:DataRecord&gt;</span>
                        <span class="tag">&lt;/om:result&gt;</span>
                <span class="tag">&lt;/om:OM_Observation&gt;</span>
        <span class="tag">&lt;/sos:observationData&gt;</span>
...
<span class="tag">&lt;/sos:GetObservationResponse&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grow_sos_server_implementation"><a class="anchor" href="#_grow_sos_server_implementation"></a>7.5. GROW SOS server implementation</h3>
<div class="paragraph">
<p>The GROW SOS service is tightly integrated into the GROW platform based around Hydrologic&#8217;s existing Hydronet 4 platform.  The SOS 2.0 service runs concurrently with the GROW standards API in the HydroNET GROW Server.</p>
</div>
<div class="paragraph">
<p>The service implements two .net packages that disseminate GROW data to the SOS 2.0 standard within the GROW instance of HydroNET 4 Server. A SOS package covers the mapping of SOS 2.0 requests to GROW requests and the mapping of GROW data structures to SOS 2.0 standards. A second package Ogc.Wrapper.Entities contains the SOS 2.0 entity definitions.</p>
</div>
<div class="paragraph">
<p>The Base URL of the GROW SOS 2.0 service:
<a href="http://grow-beta-api.hydronet.com/api/service/sos" class="bare">http://grow-beta-api.hydronet.com/api/service/sos</a></p>
</div>
<div class="paragraph">
<p>SOS 2.0 knows four core operations: GetCapabilities, DescribeSensor, GetObservation and GetFeatureOfInterest.</p>
</div>
<div class="sect3">
<h4 id="_getcapabilities"><a class="anchor" href="#_getcapabilities"></a>7.5.1. GetCapabilities</h4>
<div class="paragraph">
<p>This operation lists all available metadata in the service and provides a detailed list of all other operations that are provided in the service itself. It provides the information you need to execute other operations within the SOS 2.0 effectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="_getobservation"><a class="anchor" href="#_getobservation"></a>7.5.2. GetObservation</h4>
<div class="paragraph">
<p>This operation gives the client access to observation data from sensors. What data is returned is dependent on the parameters you give as a client.</p>
</div>
<div class="paragraph">
<p>The GetObservation operation requires the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Procedure: The identifier of the sensor. The procedure can be found in the GetCapabilities response.</p>
</li>
<li>
<p>ObservedProperty: The parameter that you want to query data for. A sensor can provide data for multiple parameters (e.g.: soil moisture, temperature). Which ObservedProperies are available for this sensor can be found in the GetCapabilities response, or the DescribeSensor response of the relevant sensor.</p>
</li>
<li>
<p>TemporalFilter: The timespan for which you want to query data. Datetimes follow the ISO 8601  standard. The full timespan of data that the sensor provides can be found in the GetCapabilities or DescribeSensor (for the relevant sensor) response.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getfeatureofinterest"><a class="anchor" href="#_getfeatureofinterest"></a>7.5.3. GetFeatureOfInterest</h4>
<div class="paragraph">
<p>This operation provides information about features of interest (name, description, coordinates etc.) of a sensor or an observation.</p>
</div>
<div class="paragraph">
<p>The GetFeatureOfInterest operation requires the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>procedure:The identifier of the sensor. The procedure can be found in the GetCapabilities response</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The SOS 2.0 service in GROW provides two response types: xml and json. The client can provide ResponseFormat in the parameters to define which response is desired. If no ResponseFormat is given the service returns xml by default.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SOS_Client"><a class="anchor" href="#SOS_Client"></a>8. SOS clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter we describe three SOS integrated clients tested in the Interoperability Experiment.</p>
</div>
<div class="sect2">
<h3 id="_grow_client"><a class="anchor" href="#_grow_client"></a>8.1. Grow Client</h3>
<div class="paragraph">
<p>The GROW client is a demonstrator application showing the how data sources can be combined in a tabular data warehouse and off the shelf visualisation tools can be used to create rich visualisations.  In the case of this demonstrator, Microsoft&#8217;s PowerBi was used although commercial tools such as Tableau, Spotfire can be used.  In addition, free tools such as Grafana, Rawgraphs or Apache Superset can of course be employed.</p>
</div>
<div class="paragraph">
<p>The diagram below shows a typical output using PowerBi, showing GROW sensor locations combined with Airhack sensor locations.</p>
</div>
<div id="img-AndyClient" class="imageblock">
<div class="content">
<img src="images/AndyClient.png" alt="Andy SOS Client">
</div>
<div class="title">Figure 9. GROW SOS Client</div>
</div>
<div class="paragraph">
<p>In this application data is pulled from two SOS sources (GROW and AirHack) via a python script, usually overnight.  This data is stored in a tabular data warehouse, in this prototype this is just flat files, however a full scale data warehouse such as Microsoft&#8217;s Analysis services or a tabular database such as Cassandra could be used.
Data from the warehouse is pulled nightly into Microsoft&#8217;s cloud and then published to a web page that makes heavy use of javascript to provide an rich exporable interface.</p>
</div>
<div id="img-GROWSOSFlow" class="imageblock">
<div class="content">
<img src="images/GROWSOSFlow.png" alt="SOS Client">
</div>
<div class="title">Figure 10. GROW data follow</div>
</div>
<div class="paragraph">
<p>This approach can be extended to mix different types of data into one visualisation.  In the figure below gridded data (locations of sensors) is combined with time series data so that the user can explore the data more fully.  In this application when a user click on a sensor, the time series data from that sensor is displayed to the user.   In this case the tool takes the time series data and displays the average, minimum and maximum of the time series data.</p>
</div>
<div id="img-GrowData" class="imageblock">
<div class="content">
<img src="images/GrowData.png" alt="SOS Client">
</div>
<div class="title">Figure 11. GROW SOS Client data</div>
</div>
</div>
<div class="sect2">
<h3 id="_miramon_client"><a class="anchor" href="#_miramon_client"></a>8.2. MiraMon Client</h3>
<div class="paragraph">
<p>The MiraMon map Browser is a long term developing effort to create a visualization, analysis and download tool that runs in modern web browsers. Only based on HTML5 and JavaScript it uses Open Geospatial Consortium web service protocols to connect to web services and show the information to the user. The objective of the development is to assign to web browser and the JavaScript engine as much work as possible, limiting interactions to the server to the minimum possible and the transfer of information to a format that is as raw as possible. This approach can be surprising, these days were many application prefer to perform processing functionalities in the cloud and not by the client machine. Most of the time, the MiraMon map Browser is the direct responsible to create the visualization on the flight based on the raw data, allowing the user to change visualization properties, perform analysis, statistics or build time series in the client side directly. In the <a href="#DataQuality">Data quality estimations in the client side</a> section we will show how the same principle can be used to compute overall data set quality can be computed on the flight too.</p>
</div>
<div class="paragraph">
<p>This are the main functionalities and standards used to achieve them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Raster visualization and query by location is possible using OGC Web Map Service and Web Map Tile Service.</p>
</li>
<li>
<p>Raster analytics is possible by using the OGC Web Map Service in an special way that transmits binary arrays of values (raw or RLE encoded) instead of pictorial representations. Pixel based analysis is performed directly in JavaScript in the client side and visualized on the flight.</p>
</li>
<li>
<p>Vector visualization and query by location is possible using OGC Web Feature Service and Sensor Observation Service. The client accepts both XML an JSON formats.</p>
</li>
<li>
<p>Data download is limited to the use of Web Coverage Service v.1.0.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Several layers of data coming from different servers and using different protocols can be overlaid simultaneously. Some layers represent data from a single dataset while other can be a virtual datasets computed on the flight for each zoom and pan, and created by combining data form more than one dataset and server.</p>
</div>
<div class="paragraph">
<p>Both WFS and SOS visualization are currently limited to points that are represented in a HTML5 canvas as icons, circles and texts and could be easily extended to lines and polygons in the near future. This functionalities where particularly useful to show occasional observations done by citizens in different places. We where able to show together Ground Truth 2.0 observations with HackAir observations using the SOS protocol directly in XML and in JSON. Some of the visualization functionalities were actually improved during the Interoperability Experiment such as the capability to condition the color of a circle by an attribute (or an observed <em>result</em>) of the feature. This way it was possible to represent the level of concentration of a pollutant as a colored circle using  color code that was represented in the legend.</p>
</div>
<div class="paragraph">
<p>Representing the positions of the observations will only require the GetFeatureOfInterest operation except if the visualization of the feature should depend on the <em>result</em> of the observation. In the later case, a GetObservation is performed and all the information on the features is loaded in the client making query bay location non dependent on the server anymore.</p>
</div>
<div id="img-MiraMonClient" class="imageblock">
<div class="content">
<img src="images/MiraMonClient.png" alt="MiraMon SOS Client">
</div>
<div class="title">Figure 12. MiraMon SOS Client</div>
</div>
</div>
<div class="sect2">
<h3 id="_52north_helgoland_sensor_web_viewer"><a class="anchor" href="#_52north_helgoland_sensor_web_viewer"></a>8.3. 52°North Helgoland Sensor Web Viewer</h3>
<div class="paragraph">
<p>The Helgoland Sensor Web Viewer developed by 52°North is an open source visualisation tool for different kinds of Sensor Web data. It allows to explore available observation data sets and to visualise the actual data (e.g. time series) as diagrams.</p>
</div>
<div class="paragraph">
<p>Figure 1 shows the map view of the Helgoland Sensor Web Viewer. In this case, a sample data set of the hackAIR project is explored. The map view shows the locations at which air quality sensors are located.</p>
</div>
<div id="img-HelgolandMapView" class="imageblock">
<div class="content">
<img src="images/HelgolandMapView.png" alt="Helgoland Map View">
</div>
<div class="title">Figure 13. 52°North Helgoland Sensor Web Viewer - Map View</div>
</div>
<div class="paragraph">
<p>After selecting a specific measurement location, the data can be visualised as a diagram (see Figure 2). It is possible to combine data from multiple sensors, multiple observed properties and even from different providers into a single diagram.</p>
</div>
<div id="img-HelgolandDiagramView" class="imageblock">
<div class="content">
<img src="images/HelgolandDiagramView.png" alt="Helgoland Diagram View">
</div>
<div class="title">Figure 14. 52°North Helgoland Sensor Web Viewer - Diagram View</div>
</div>
</div>
<div class="sect2">
<h3 id="_sos_technology_integration_experiments"><a class="anchor" href="#_sos_technology_integration_experiments"></a>8.4. SOS Technology Integration Experiments</h3>
<div class="paragraph">
<p>During the IE a set of Technology Integration Experiments (TIE) were conducted. In the client and server architecture a TIE is test that combines a server with a client and demonstrates that communication between client and server is possible and the user (operating the client) is able to see or get some data. The following table summarizes the tests conducted and the degree o success achieved.</p>
</div>
<table id="table_TIE" class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 2. Technology Integration Experiment results</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Servers</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data</strong></th>
<th class="tableblock halign-left valign-top"><strong>MiraMon Client</strong></th>
<th class="tableblock halign-left valign-top"><strong>Helgoland Client</strong></th>
<th class="tableblock halign-left valign-top"><strong>Grow Client</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MiraMon</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ground Truth 2.0</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Helgoland</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HackAir</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>istSOS</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HackAir</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Grow</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grow</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DataQuality"><a class="anchor" href="#DataQuality"></a>9. Data quality estimations in the client side</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the main concerns in using and adopting citizen science based data is the quality of observations. Citizen Observatories (and, by extension, Citizen Science) are particularly sensible to data quality because the number of contributors is bigger and more heterogeneous than in a traditional data survey campaign. An additional difficulty is that active Citizen Observatories are receiving continuous inputs and updates from citizens. GroundTruth 2.0 has developed a tool to document well the quality of datasets in order to increase the trust on the information collected by citizens integrated in the MiraMon Map browser.</p>
</div>
<div class="paragraph">
<p>The tool requires that data is exposed in the Web as a service using Sensor Observation Service (SOS). It presents a set of tests like positional accuracy, attribute consistency or confusion matrix that can be applied to a complete dataset or to an area the user is visualizing. Results include an overall quality indicator for the dataset.</p>
</div>
<div class="paragraph">
<p>The Ground Truth 2.0 Data Quality tool uses an interoperable approach based on QualityML that allows to parametrize the different statistics that are used to assess the quality of the data, and it focus on data quality indicators for Citizen Science datasets from the QualityML list. The quality module is encoded in JavaScript and has been made available as part of the web based MiraMon Map Browser (<a href="https://github.com/joanma747/MiraMonMapBrowser" class="bare">https://github.com/joanma747/MiraMonMapBrowser</a>).</p>
</div>
<div class="sect2">
<h3 id="_quality_estimation_on_vector_data"><a class="anchor" href="#_quality_estimation_on_vector_data"></a>9.1. Quality estimation on vector data</h3>
<div class="paragraph">
<p>The SOS protocol and the GetObservation operation enables a client to retrieve all the information about the results of the observations. With this data, the client can perform all sorts of analysis on the observations including to apply some quality checks. This section will discuss a pilot that was done in the GroundTruth 2.0 project that demonstrates this capability in some practical cases.</p>
</div>
<div class="paragraph">
<p>The selected cases and its implementation is based on the QualityML vocabulary. The scenario of rapidly growing geodata catalogues requires tools focused on facilitate users the choice of products. QualityML is a dictionary that contains hierarchically structured concepts to precisely define and relate quality levels: from quality classes to quality measurements. This levels are used to encode quality semantics for geospatial data by mapping them to the corresponding metadata schemas. The benefits of having encoded quality semantics, in the case of data producers, are related with improvements in their product discovery and better transmission of their characteristics. In the case of data users, they would better compare quality and uncertainty measures to take the best selection of data as well as to perform dataset intercomparison. Also it allows other components (such as visualization, discovery, or comparison tools) to be quality-aware and interoperable. On one hand, the QualityML is a profile of the ISO geospatial metadata standards (e.g. ISO 19157) providing a set of rules for precisely documenting quality measure parameters that is structured in 5 levels. On the other hand, QualityML includes semantics and vocabularies for the quality concepts. Whenever possible, it uses statistic expressions from the UncertML dictionary (<a href="http://www.uncertml.org" class="bare">http://www.uncertml.org</a>) encoding. However it also extends UncertML to provide a list of alternative metrics that are commonly used to quantify quality beyond the uncertainty concept.</p>
</div>
<div class="sect3">
<h4 id="_how_data_quality_is_presented"><a class="anchor" href="#_how_data_quality_is_presented"></a>9.1.1. How data quality is presented</h4>
<div class="paragraph">
<p>Datasets can have precomputed data quality indicators associated. This is part of the metadata of the datasets, but in the map browser it has a prominent place in the <em>quality</em> option in the context menu of the layer name in the legend.</p>
</div>
<div id="img-DQ-quality" class="imageblock">
<div class="content">
<img src="images/dq-quality.png" alt="DQ Quality">
</div>
<div class="title">Figure 15. Data Quality context menu</div>
</div>
<div class="paragraph">
<p>Data quality indicators are presented following the QualityML model. For a quality class (in the <a href="#img-DQ-indicator-qml">Figure 16</a> "Thematic classification correctness"), there could be one or more quality measures (in the <a href="#img-DQ-indicator-qml">Figure 16</a> "Misclassification"), that are done by applying some metrics (in the <a href="#img-DQ-indicator-qml">Figure 16</a> "MeanAbsolute and StandardDeviation") over a domain (in the first entry of <a href="#img-DQ-indicator-qml">Figure 16</a> "Omission Error" over the categories "water" and "no water")</p>
</div>
<div id="img-DQ-indicator-qml" class="imageblock">
<div class="content">
<img src="images/dq-indicator-qml.png" alt="DQ Indicator in QualityML">
</div>
<div class="title">Figure 16. Data Quality indicators presented following the QualityML data model.</div>
</div>
<div class="paragraph">
<p>Every concept used here is connected to the QualityML vocabulary to know more details about it.</p>
</div>
<div id="img-DQ-mean-absolute-qml" class="imageblock">
<div class="content">
<img src="images/dq-mean-absolute-qml.png" alt="DQ Indicator in QualityML">
</div>
<div class="title">Figure 17. Connection to the QualityML dictionary.</div>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_start_computing_data_quality"><a class="anchor" href="#_how_to_start_computing_data_quality"></a>9.1.2. How to start computing data quality</h4>
<div class="paragraph">
<p>The MiraMon Map Browser described in the section <a href="#SOS_Client">SOS clients</a> allows for computing some data quality indicators. To start the process, we should select the right option in the context menu by clicking in the layer name in the legend.</p>
</div>
<div id="img-DQ-compute" class="imageblock">
<div class="content">
<img src="images/dq-compute.png" alt="DQ Compute">
</div>
<div class="title">Figure 18. Data Quality compute context menu</div>
</div>
<div class="paragraph">
<p>This option opens a dialog box that offers a short list of four quality indicators that will grow with new tests.</p>
</div>
<div id="img-DQ-indicator" class="imageblock">
<div class="content">
<img src="images/dq-indicator.png" alt="DQ Indicator">
</div>
<div class="title">Figure 19. Data Quality indicator list</div>
</div>
</div>
<div class="sect3">
<h4 id="_case_1_positional_accuracy_of_the_layer_from_observation_uncertainties"><a class="anchor" href="#_case_1_positional_accuracy_of_the_layer_from_observation_uncertainties"></a>9.1.3. Case 1: Positional accuracy of the layer from observation uncertainties</h4>
<div class="paragraph">
<p>Many citizen Science projects, use a mobile phone to get observations. In this process they use the location capabilities of the phone, including GPS, 3G triangulation, Wify antenna location or IP address registration. Each of this methods has different known positional accuracies and the phone is able to estimate that ad the same time as it estimates the position. In this case we will assume that the individual observations has got a position an some estimation of the positional uncertainty and this are recorded by the service and offered as properties of the observation.</p>
</div>
<div class="paragraph">
<p>To compute this indicator we should select the property associated with the observation that contains the positional uncertainty.</p>
</div>
<div id="img-DQ-positional-uncertainty-field" class="imageblock">
<div class="content">
<img src="images/dq-positional_uncertainty_field.png" alt="Positional Uncertainty Field">
</div>
<div class="title">Figure 20. Selection of the positional uncertainty field</div>
</div>
<div class="paragraph">
<p>The calculated data quality parameter is not shown immediately but added to the previous recorded data quality indicators.</p>
</div>
<div id="img-DQ-done" class="imageblock">
<div class="content">
<img src="images/dq-done.png" alt="DQ done">
</div>
<div class="title">Figure 21. Calculation complete message</div>
</div>
<div class="paragraph">
<p>The result is a quality report that can be found in the <code>quality</code> option in the context menu by clicking in the layer name in the legend.</p>
</div>
<div id="img-DQ-positional_accuracy" class="imageblock">
<div class="content">
<img src="images/dq-positional_accuracy.png" alt="DQ positional accuracy">
</div>
<div class="title">Figure 22. Calculated positional accuracy</div>
</div>
<div class="paragraph">
<p>Several things can be commented here. The first one indicates that the scope is not the full dataset but the view used for calculating the quality indicator: "Dataset fragment of this area: x=[-1.22,4.76], y=[40.36,42.97]". Secondly, the statement reports that not all observations has positional uncertainties: "There are 140 of 254 that does not have uncertainty information". The accuracy is reported as a <em>half-length confidence interval</em> with a confidence <em>level</em> of 0.683. An uncertainty of 180.39m is not particularly good indicating the heterogeneity of the methods used to calculate the positions of the observations, some of the with big uncertainties.</p>
</div>
</div>
<div class="sect3">
<h4 id="_case_2_logical_consistency_of_the_thematic_attributes"><a class="anchor" href="#_case_2_logical_consistency_of_the_thematic_attributes"></a>9.1.4. Case 2: Logical consistency of the thematic attributes</h4>
<div class="paragraph">
<p>Many Citizen Science projects provide the citizens with comprehensive instructions on how to conduct some observational tasks. In some cases observations are limited to a set of possibilities for a list. In cases more complex, once selected an option in the first list, only some values are possible in a second list. Sometimes apps control user inputs preventing citizens to input a value that is not listed in the instructions, but in some cases (such as bulk input form a csv) there might be no controls and unwanted values or incompatible value combinations could end up in the database.</p>
</div>
<div class="paragraph">
<p>In the case of RitmeNatura citizen observatory, we rely on Natusfera software that is designed for biodiversity in general allowing any possible scientific name while RitmeNatura is asking for a limited set of species. Obviously, if nobody filters them, there is a chance that observations report on species not contemplated by the RitmeNatura subset.</p>
</div>
<div class="paragraph">
<p>The logical consistency test can count how many observations are not consistent with a controlled list of possibilities. To compute this indicator we should select the property (or properties) associated with the observation that are affected by a controlled list of possibilities and list the possible combinations of attributes. In this simple case, we will test if the <code>scientific name</code> is compatible with the list of possibilities described in the legend.</p>
</div>
<div id="img-DQ-logical-consistency" class="imageblock">
<div class="content">
<img src="images/dq-logical-consistency.png" alt="DQ Logical Consistency">
</div>
<div class="title">Figure 23. Computation of logical consistency</div>
</div>
<div class="paragraph">
<p>A new quality indicator will be added to the list of quality indicators related to this layer.</p>
</div>
<div id="img-DQ-logical-consistency-result" class="imageblock">
<div class="content">
<img src="images/dq-logical-consistency-result.png" alt="DQ Logical Consistency Result">
</div>
<div class="title">Figure 24. Domain consistency result</div>
</div>
<div class="paragraph">
<p>Only 129 of the 249 species scientific name are consistent with the legend. In addition, 5 observations have no scientific name (probably because the observer did not know it).</p>
</div>
</div>
<div class="sect3">
<h4 id="_case_3_temporal_validity_of_the_observation_date"><a class="anchor" href="#_case_3_temporal_validity_of_the_observation_date"></a>9.1.5. Case 3: Temporal validity of the observation date</h4>
<div class="paragraph">
<p>One very simple quality control that can be performed is to check if the observations has an associated data, if the date is in the right format and if the date is in a range of plausible values.</p>
</div>
<div class="paragraph">
<p>In this example, we test if the observations where done after the year 2000 because we know there should not be observations before this date.</p>
</div>
<div id="img-DQ-temporal-validity" class="imageblock">
<div class="content">
<img src="images/dq-temporal-validity.png" alt="DQ Temporal Validity">
</div>
<div class="title">Figure 25. Computation of temporal validity</div>
</div>
<div class="paragraph">
<p>A new quality indicator will be added to the list of quality indicators related to this layer.</p>
</div>
<div id="img-DQ-temporal-validity-result" class="imageblock">
<div class="content">
<img src="images/dq-temporal-validity-result.png" alt="DQ Temporal Validity Result">
</div>
<div class="title">Figure 26. Temporal validity result</div>
</div>
<div class="paragraph">
<p>In this case we see that all the observations has passed the test.</p>
</div>
</div>
<div class="sect3">
<h4 id="_case_4_validity_of_the_positions_of_observations_by_bounding_box"><a class="anchor" href="#_case_4_validity_of_the_positions_of_observations_by_bounding_box"></a>9.1.6. Case 4: Validity of the positions of observations (by bounding box)</h4>
<div class="paragraph">
<p>One very common mistake in data gathering projects is the presence of observations in places that does not have much sense. Tipical mistakes is swap latitude and longitude values or simply have them in the middle of the Atlantic ocean at the 0,0 position.</p>
</div>
<div class="paragraph">
<p>In this cases we are going to run a test to find how many observations are in the Catalonian bounding box.</p>
</div>
<div id="img-DQ-positional-validity" class="imageblock">
<div class="content">
<img src="images/dq-position-validity.png" alt="DQ Positional validity">
</div>
<div class="title">Figure 27. Computation of positional validity</div>
</div>
<div class="paragraph">
<p>A new quality indicator will be added to the list of quality indicators related to this layer.</p>
</div>
<div id="img-DQ-positional-validity-result" class="imageblock">
<div class="content">
<img src="images/dq-position-validity-result.png" alt="DQ Positional validity result">
</div>
<div class="title">Figure 28. Positional validity result</div>
</div>
<div class="paragraph">
<p>The result identifies 35 observations in this view that are clearly outside the boundaries of Catalonia.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_estimation_on_raster_data"><a class="anchor" href="#_quality_estimation_on_raster_data"></a>9.2. Quality estimation on raster data</h3>
<div class="paragraph">
<p>As explained before, the WMS protocol can be used to transport binary arrays instead of pictures. During this Interoperability experiment, we have implemented a comparison functionality that can be used to compare two categorical maps with the same legend. This comparison results in a new map with all combinations of the two maps categories allowing us to discover changes in this maps.</p>
</div>
<div class="paragraph">
<p>This can be used to compare maps but also to quality control maps if we assume that one map represents the truth.</p>
</div>
<div class="sect3">
<h4 id="_confusion_matrix"><a class="anchor" href="#_confusion_matrix"></a>9.2.1. Confusion matrix</h4>
<div class="paragraph">
<p>In this exercise we will combine one land cover map created from Open Street Map with another one created by remote sensing.</p>
</div>
<div id="img-DQR-coimbra" class="imageblock">
<div class="content">
<img src="images/dqr-coimbra.png" alt="DQ OSM LUM">
</div>
<div class="title">Figure 29. Open street map version of the land use map</div>
</div>
<div id="img-DQR-creaf" class="imageblock">
<div class="content">
<img src="images/dqr-creaf.png" alt="DQ RS LUM">
</div>
<div class="title">Figure 30. Remote sensing version of the land use map</div>
</div>
<div id="img-DQR-lum-legend" class="imageblock">
<div class="content">
<img src="images/dqr-lum-legend.png" alt="DQ LUM legend">
</div>
<div class="title">Figure 31. Land use map legend</div>
</div>
<div class="paragraph">
<p>The process of creating a confusion matrix starts by requesting the combination of both maps in a single layer those pixels will contain classes that are all possible permutations of the legend. In the <a href="#img-DQR-layer-combination">Figure 32</a> the Coimbra version is the one generated from OSM while the CREAF-RS version is the one created by remote sensing. The result of the combination is shown in <a href="#img-DQR-layer-combination">Figure 32</a>. In principle even the number of combinations is 25, there are only 5 many colors present, corresponding to the classes that are the same in both maps.</p>
</div>
<div id="img-DQR-layer-combination" class="imageblock">
<div class="content">
<img src="images/dqr-layer-combination.png" alt="DQ Layer combination LUM request">
</div>
<div class="title">Figure 32. Request for a layer combination of both land use maps</div>
</div>
<div class="paragraph">
<p>Now we can request the confusion matrix as a statistical summary of the combination by selecting the option in the context menu.</p>
</div>
<div id="img-DQR-layer-combination-result" class="imageblock">
<div class="content">
<img src="images/dqr-layer-combination-result.png" alt="DQ Layer combination LUM">
</div>
<div class="title">Figure 33. Layer combination of both land use maps</div>
</div>
<div class="paragraph">
<p>The diagonal values of the matrix (represented in green) correspond to the pixels that have the same value in both maps. The non-diagonal values are the pixels that has different classes in both maps. We can also see some information about the most similar classes (<em>artificial surfaces</em> and <em>forest and semi natural areas</em>) as well as the Kappa coefficient that is 0.81 (the closes to 1 the better).</p>
</div>
<div id="img-DQR-confusion-matrix-request" class="imageblock">
<div class="content">
<img src="images/dqr-confusion-matrix-request.png" alt="DQ confusion matrix request">
</div>
<div class="title">Figure 34. Request for the confusion matrix</div>
</div>
<div class="paragraph">
<p>A manual exploration of the dataset allow to discover a big purple area the is <em>artificial surfaces</em> from the OSM and <em>forest and semi natural areas</em> from the RS map.</p>
</div>
<div id="img-DQR-confusion-matrix-result" class="imageblock">
<div class="content">
<img src="images/dqr-confusion-matrix-result.png" alt="DQ confusion matrix LUM">
</div>
<div class="title">Figure 35. Request for the confusion matrix result</div>
</div>
<div id="img-DQR-layer-combination-confusion" class="imageblock">
<div class="content">
<img src="images/dqr-layer-combination-confusion.png" alt="DQ confusion zoom LUM">
</div>
<div class="title">Figure 36. Zoom to an area of discrepancies</div>
</div>
<div id="img-DQR-layer-combination-confusion-reason" class="imageblock">
<div class="content">
<img src="images/dqr-layer-combination-confusion-reason.png" alt="DQ confusion reason">
</div>
<div class="title">Figure 37. Reason for the discrepancies</div>
</div>
<div class="paragraph">
<p>The discrepancy makes sense. A big park in the city is identified as artificial in the OSM version that is more focus on land use while is seen as a forest area from remote sensing due to its green land cover.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_future_work_2"><a class="anchor" href="#_future_work_2"></a>9.3. Future work</h3>
<div class="paragraph">
<p>There are some points the authors of this chapter believe it is worth to develop or explore.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the implementation of the confusion matrix there is no connection to the QualityML. It should be done.</p>
</li>
<li>
<p>Highlight the observations that were detected as less accurate could be an interesting feature to have.</p>
</li>
<li>
<p>We would like to be able to share the quality assessments with other users. One possibility is usinge the OGC Geospatial user feedback to report data quality assessments and share them with other users. Saving the quality report in the NiMMbus database (www.opengis.uab.cat/nimmbus) implemented in the NextGEOSS project will allow that.</p>
</li>
<li>
<p>The computations done in the MiraMon map browser are just an small subset of the QualityML vocabulary. We would like to extend the implementation to cover a better range of possibilities.</p>
</li>
<li>
<p>QualityML is a vocabulary for data quality. The OGC definitions server presented in <a href="#DefinitionServer">Definition Server</a> is a generic tool to share vocabularies. Translating QualityML into a format that can be ingested by the Definitions Server should be a priority of the next interoperability experiment.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DefinitionServer"><a class="anchor" href="#DefinitionServer"></a>10. Definition Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The definition server is service that allows for storing, querying and linking definitions. The definition server provides a common way to resolve terms published by the OGC to get details of definitions (instead of downloading large complex documents in varying formats).</p>
</div>
<div class="paragraph">
<p>Currently the definitions server has a complete set of terms that have been defined by the OGC since the inception of the OGC Naming Authority - which aims to keep all such URL references consistent. In Citizen Science we can find hundreds of projects dealing with similar topics but it is difficult to know if they are collecting variables that can be directly compared. By trying to link to a previous definition on the server they become connected to other projects. By exposing their definitions in the definition server other citizen science projects can reuse the same definitions and methodologies.</p>
</div>
<div class="paragraph">
<p>It has the ability to get machine readable versions of these details (e.g. JSON to allow simple integration of details into Web and mobile applications). It has a flexible capability to cross-link between terms and the ability to use any information model to extend available details. It allows for per-term or as-package download.</p>
</div>
<div class="paragraph">
<p>In this Interoperability Experiment the defintion server was improved and presented by the OGC to the other participants in the IE. As of Nov 2019 he API is undergoing an upgrade to comply with the emerging W3C Recommendation for "Content Negotiation by Profile" [<a href="https://www.w3.org/TR/dx-prof-conneg/" class="bare">https://www.w3.org/TR/dx-prof-conneg/</a>]. In the next phase of the IE, we will test the applicability of the definition server for citizen Science purposes.</p>
</div>
<div class="sect2">
<h3 id="_what_the_definition_server_does"><a class="anchor" href="#_what_the_definition_server_does"></a>10.1. What the definition server does.</h3>
<div class="paragraph">
<p>The OGC Definitions Server is a Web accessible source of information about things ("concepts") the OGC defines or that communities ask the OGC to host on their behalf. It applies FAIR principles to the key concepts that underpin interoperability in systems using OGC specifications. These things can be anything that is important in the course of interoperability around spatial information where the OGC plays a role in facilitating common understanding - either through publishing specifications or assisting communities to share related concepts. OGC uses stable web addresses (URIs) to unambiguously identify concepts in its specifications. The Definitions Server makes those URIs "work" - i.e. makes them dereference to a definition that can be used.</p>
</div>
<div class="paragraph">
<p>The OGC Naming Authority manages the Definitions Server to ensure all URIs are stable with transparent governance. These identifiers can thus be safely used in external context. All content is freely available for re-use. Re-use is envisaged largely through the machine-readable versions</p>
</div>
<div class="paragraph">
<p>Examples include the OGC glossary, technical terms from application schemas, for example the HY schema from the <a href="https://www.opengis.net/def/appschema/hy_features/hyf/HY_HydroFeature" class="bare">https://www.opengis.net/def/appschema/hy_features/hyf/HY_HydroFeature</a> [hydrology domain], or many others.</p>
</div>
<div class="paragraph">
<p>Even though currently a limited search capability is provided, the Definitions Server is implemented using Linked Data principles - so the combination of stable URIs allowing references to be made from outside, and "follow your nose" navigation via links from one concept to related concepts provides enhanced findability.</p>
</div>
<div class="paragraph">
<p>The Definitions Server does not make any assumptions about the client software that may be used now or in the future, other than the use of HTTP protocols. This enhances accessibility for different environments.</p>
</div>
<div class="paragraph">
<p>The "Web-friendly" way of using an identifier (i.e. a URL) to get more information is augmented by "content negotiation" - the Definitions Server can deliver both user friendly Web pages and other forms of resource representations, e.g. JSON-LD or Turtle (TTL).</p>
</div>
<div class="paragraph">
<p><a href="#img-DS_representations">Figure 38</a> shows different views of a resource HY_Feature. The left panel shows an HTML representation, the middle shows the same information using TTL, and the right using JSON. All three representations have the same content, but differ in its serialization/format. This allows both human users to explore the OGC Definition Server, as well as machines to process its content.</p>
</div>
<div id="img-DS_representations" class="imageblock">
<div class="content">
<img src="images/ds_representations.png" alt="Definition server representations">
</div>
<div class="title">Figure 38. Various representations of the same content (fragments, HTML left, TTL middle, JSON right)</div>
</div>
</div>
<div class="sect2">
<h3 id="_interoperability_in_the_definition_server"><a class="anchor" href="#_interoperability_in_the_definition_server"></a>10.2. Interoperability in the definition server</h3>
<div class="paragraph">
<p>The interoperability of these resources is a key goal. There are several aspects of this handled using different mechanisms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Content model: can the client understand how the data is structured?</p>
</li>
<li>
<p>Encoding: can the client parse the response</p>
</li>
<li>
<p>Interaction: how can a client ask for the form it needs?</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_content_interoperability"><a class="anchor" href="#_content_interoperability"></a>10.2.1. Content interoperability</h4>
<div class="paragraph">
<p>The identifiers mentioned above, i.e. the URLs that can deliver content to the user, are termed Concepts and are organized into ConceptSchemes - and Collections. Concept, ConceptScheme, and Collections are defined by SKOS. SKOS, the Simple Knowledge Organization System, is a common data model for sharing and linking knowledge organization systems via the Web. It is a W3C recommendation.</p>
</div>
<div class="paragraph">
<p>So why SKOS? Many knowledge organization systems, such as thesauri, taxonomies, classification schemes and subject heading systems, share an almost similar structure, and are used in almost similar applications. Even though they might even share exact semantics, you need to learn that by explicitly discovering, accessing, and evaluating the content. Without a standardized interface, this endeavor is labor-intensive and can hardly be executed by machines.</p>
</div>
<div class="paragraph">
<p>SKOS captures much of this similarity and makes it explicit. It enables data and technology sharing across diverse applications by providing a lightweight, intuitive language for developing and sharing knowledge. In most cases, existing knowledge can be transformed into SKOS, because the SKOS data model provides a standard, low-cost migration path for porting existing knowledge organization systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_encoding_interoperability"><a class="anchor" href="#_encoding_interoperability"></a>10.2.2. Encoding Interoperability</h4>
<div class="paragraph">
<p>The Definitions Server currently offers a range of encodings for all terms: 1. HTML 2. JSON (using JSON-LD augmentations to specify URLs ) 3. RDF (as XML,TTL or JSON-LD) 4. Plain text</p>
</div>
<div class="paragraph">
<p>Where applicable certain types of resources are also available in the original or additional formats. For example Application Schemas will be made available as XML schema (XSD) and UML (XMI) forms.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_definitions_server"><a class="anchor" href="#_using_the_definitions_server"></a>10.3. Using the Definitions Server</h3>
<div class="sect3">
<h4 id="_uri_access"><a class="anchor" href="#_uri_access"></a>10.3.1. URI access</h4>
<div class="paragraph">
<p>Access definitions by following any URI supported.</p>
</div>
<div class="paragraph">
<p>The server will respond with a HTTP 303 URI redirect to the current service interface appropriate to the requested profile(view) and format.</p>
</div>
<div class="paragraph">
<p><a href="http://www.opengis.net/def/docs/03-003r10" class="bare">http://www.opengis.net/def/docs/03-003r10</a> ⇒ HTTP 303 Location: <a href="http://defs.opengis.net/elda-common/ogc-def/resource?uri=http://www.opengis.net/def/docs/03-003r10" class="bare">http://defs.opengis.net/elda-common/ogc-def/resource?uri=http://www.opengis.net/def/docs/03-003r10</a></p>
</div>
<div class="paragraph">
<p>(the actual final resource URL may change as we improve the interface - but the original URI will always work)</p>
</div>
</div>
<div class="sect3">
<h4 id="_conceptschemes_collections_and_semantics"><a class="anchor" href="#_conceptschemes_collections_and_semantics"></a>10.3.2. ConceptSchemes, Collections and Semantics</h4>
<div class="paragraph">
<p>Every term belongs to a "ConceptScheme" which will usually be part of the path</p>
</div>
<div class="paragraph">
<p><a href="http://www.opengis.net/def/docs/03-003r10" class="bare">http://www.opengis.net/def/docs/03-003r10</a> skos:inScheme <a href="http://www.opengis.net/def/docs" class="bare">http://www.opengis.net/def/docs</a></p>
</div>
<div class="paragraph">
<p>Each part of the path ending with "/" will represent a Collection that contains a list of members <a href="http://www.opengis.net/def/docs" class="bare">http://www.opengis.net/def/docs</a> policy:collectionView <a href="http://www.opengis.net/def/docs/" class="bare">http://www.opengis.net/def/docs/</a></p>
</div>
<div class="paragraph">
<p>Terms may also a non-overlapping set of broader/narrower relationships, with the top of each hierarchy linked via skos:hasTopConcept from the ConceptScheme</p>
</div>
<div class="paragraph">
<p>This supports the following linkages: 1) ConceptSchemes are the "unit of governance" where metadata and download links for sets of definitions can be accessed 2) Collections are a flexible nested way of listing related subsets of terms - where lists may overlap - but do not state semantic relationships between terms 3) Terms are the basic resources with definitions 4) Terms may be semantically related using broader/narrower and other match (e.g. skos:exactMatch)</p>
</div>
</div>
<div class="sect3">
<h4 id="_search"><a class="anchor" href="#_search"></a>10.3.3. Search</h4>
<div class="paragraph">
<p>A basic search capability is provided via the underlying interface e.g. <a href="http://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Catchment" class="bare">http://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Catchment</a></p>
</div>
<div id="img-DS_search" class="imageblock">
<div class="content">
<img src="images/ds_search.png" alt="Search">
</div>
<div class="title">Figure 39. Search option</div>
</div>
<div class="paragraph">
<p>This provides machine readable outputs if requested via the _format parameter or the HTTP Accept: header. <a href="https://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Catchment&amp;_format=ttl" class="bare">https://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Catchment&amp;_format=ttl</a></p>
</div>
<div class="paragraph">
<p>Searches may be constrained to a specific concept scheme:</p>
</div>
<div class="paragraph">
<p><a href="https://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Profile&amp;scheme=http://www.opengis.net/def/docs" class="bare">https://defs.opengis.net/elda-common/ogc-def/concept?labelcontains=Profile&amp;scheme=http://www.opengis.net/def/docs</a></p>
</div>
<div class="paragraph">
<p>(note URL encoding is required for parameters with URI values - browsers tend to do this automatically)</p>
</div>
</div>
<div class="sect3">
<h4 id="_downloading_data"><a class="anchor" href="#_downloading_data"></a>10.3.4. Downloading Data</h4>
<div class="paragraph">
<p>Every term includes a link to an "alternates" view</p>
</div>
<div id="img-DS_alternates_link" class="imageblock">
<div class="content">
<img src="images/ds_alternates_link.png" alt="Alternates link">
</div>
<div class="title">Figure 40. Alternates link</div>
</div>
<div class="paragraph">
<p>(This link can be accessed by qualifying any Definitions Server hosted URIs with _view=alternates or _profile=alternates. A W3C compliant view for the specific concept (not the dataset as a whole) can be accessed with _profile=all ) This view lists available formats for both the individual term and the collection or package that defines it:</p>
</div>
<div id="img-DS_alternates" class="imageblock">
<div class="content">
<img src="images/ds_alternates.png" alt="Alternates">
</div>
<div class="title">Figure 41. Available alternate representations</div>
</div>
<div class="paragraph">
<p>ConceptSchemes offer download options for original sources of definitions - for example an Application Schema will have a download link for the canonical UML model file.</p>
</div>
<div class="paragraph">
<p>Collections allow list of concepts to be downloaded.</p>
</div>
<div class="paragraph">
<p>Concepts allow simple packages of information about the concept itself to be accessed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SSO"><a class="anchor" href="#SSO"></a>11. User and Application Federation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the Interoperability experiment, we experimented with the federated identity provider developed in the project H2020 LandSense as Authorization Server that enables a federation of applications with user Single-Sign-On.</p>
</div>
<div class="paragraph">
<p>The Landsense project contributed the Engagement Platform (<a href="https://lep.landsense.eu/Project/LEP" class="bare">https://lep.landsense.eu/Project/LEP</a>), the H2020 Scent project contributed the Scent Harmonisation Platform Visualisation Site (<a href="https://scent-harm.iccs.gr/" class="bare">https://scent-harm.iccs.gr/</a>) as well as the Scent Explore and Measure mobile applications (<a href="https://scent-project.eu/scent-toolbox" class="bare">https://scent-project.eu/scent-toolbox</a>) and the H2020 NextGEOSS contributed the NiMMbus Geospatial user feedback system (<a href="https://www.opengis.uab.cat/nimmbus/" class="bare">https://www.opengis.uab.cat/nimmbus/</a>). The abovementioned platforms and applications were able to work together and use the LandSense Authorization Server to authenticate users and create a Single-Sign-On experience. From the user perspective, once logged in one of the platforms it can use the other two in a transparent way without having to authenticate again.</p>
</div>
<div id="img-federation-diagram" class="imageblock">
<div class="content">
<img src="images/federation-diagram.png" alt="Federation diagram">
</div>
<div class="title">Figure 42. Federation diagram</div>
</div>
<div class="paragraph">
<p>The federation is designed in a way that its complain with the GDPR EU regulation and the user is in full control of which information is released, to whom for a partciluar purpose. When registering an application with the Authorization Server, the operator of the application must declare which personal information of the user is required. To the first extreme, an application can be registered to not require any personal information. On the other end of the spectrum, an application can request personal information and the user must approve the flow of the personal information to the application, the first time the application is used. Once approved, the user can revoke the approval which will stop the application from obtaining personal information.</p>
</div>
<div class="sect2">
<h3 id="_the_landsense_authorization_server"><a class="anchor" href="#_the_landsense_authorization_server"></a>11.1. The LandSense Authorization Server</h3>
<div class="paragraph">
<p>The Authorization Server (AS) supports users to login from a variety of login providers including social media, organizations and academic institutions participating in eduGAIN. Based on the trust in the login providers, registered applications, services, tools and Application Programming Interfaces (APIs) can be used by operating a RFC 6750 compliant Open Authorization 2 (OAuth2) Resource Server that accepts either JSON Web Token (JWT) or Bearer Access Tokens from any LandSense compliant OAuth2/OpenID Authorization Server.</p>
</div>
<div class="paragraph">
<p>The Authorization Server is extensible to any other login providers as long it is compliant with the federation requirement regarding the participation as a login provider: deployment of a Security Assertion Markup Language v2 (SAML2) compliant Identity Provider. The LandSense Coordination Centre digitally signs and hosts the SAML2 metadata for the LandSense federation by which trust is established between the SAML2 Identity Providers and the Authorization Server.</p>
</div>
<div class="paragraph">
<p>The LandSense Authorization Server acts as a GDPR compliant broker between the personal information received after a user’s login and registered applications based on user approval. In order to honour GDPR data minimisation, the AS requests from the Identity Provider (IdP) at login only that amount of personal information, as it is required by a registered application. This amount (and which attributes in detail) is controlled by the registration / login level. The AS provides five levels of which the first two do not enable an application to obtain personal information: AUTH, CRYPTONAME, SAML, PROFILE, EMAIL, PROFILE+EMAIL. It can be extended to other levels like ADDRESS and PHONE.</p>
</div>
<div class="sect3">
<h4 id="SSOLevelsOfPrivacy"><a class="anchor" href="#SSOLevelsOfPrivacy"></a>11.1.1. Levels of personal information</h4>
<div class="paragraph">
<p><strong>AUTH</strong>
Any application that is registered with this level must not be GDPR compliant, as there is no information about the user other than _yes we know that you have successfully logged in with one of the trusted IdPs). After login with Level AUTH the user will not see any personal information.</p>
</div>
<div class="paragraph">
<p>An example application could be a simple geo-fencing service where there only is polygons in and out.</p>
</div>
<div class="paragraph">
<p><strong>CRYPTONAME</strong>
Any application that is registered with this level will receive a cryptoname for the user. This cryptoname is unique across all trusted IdPs and generated after a successful login. Based on the concept of creating a cryptoname for a user, it can be guaranteed that the identifier is still correct after more IdPs join. At the current state, LandSense federation trusts approx. 2850 Identity Providers worldwide.</p>
</div>
<div class="paragraph">
<p>The cryptoname is not stored at the Authorization Server which ensures that no personal information can be obtained based on the single possession of the cryptoname. This allows applications to cluster (group) user contributions without knowing the real identity of the user. Because of that, any registered application processing just the cryptoname must not be GDPR compliant.  After login with Level CRYPTONAME you will see your cryptoname as value of the personal claim <em>sub</em>.</p>
</div>
<div class="paragraph">
<p>An example API registered with this level could generate quality indexes on citizen science contributions based on user contributions stored at participating Resource Servers without knowing the actual identity of the original user(s). Even though a Resource Server stores more personal information, only the cryptoname would be released (with the actual data), as the level(s) can be verified with the Authorization Server.</p>
</div>
<div class="paragraph">
<p><strong>SAML</strong>
This level allows the registered application to obtain metadata about the Identity Provider, the user has used to login:  country, federation identifier, and name of the federation the IdP is registered with. This level can used as an add-on for the levels PROFILE and EMAIL.</p>
</div>
<div class="paragraph">
<p>For an application that operates with CRYPTONAMEs, this level is a valuable add-on as it allows to associate the user with one IdP.</p>
</div>
<div class="paragraph">
<p><strong>PROFILE</strong>
Any application that is registered with this level will be able to receive personal information as defined in the OpenID Connect specification for the scope profile (<a href="https://openid.net/specs/openid-connect-core-1_0.html" class="bare">https://openid.net/specs/openid-connect-core-1_0.html</a>) after the user has given their approval. Any application operating on this level must be fully GDPR compliant, which means that the registration process requires to provide a URL to the privacy statement of the application. This privacy statement defines which personal information is requested, for which purpose and which operators will be able to also process the personal information. After login with Level PROFILE you will see the cryptoname plus all available personal information that fall into the scope profile.</p>
</div>
<div class="paragraph">
<p><strong>EMAIL</strong>
Any application that is registered with this level will be able to receive personal information as defined in the OpenID Connect specification for the scope profile (<a href="https://openid.net/specs/openid-connect-core-1_0.html" class="bare">https://openid.net/specs/openid-connect-core-1_0.html</a>) after the user has given their approval. Any application operating on this level must be fully GDPR compliant, which means that the registration process requires to provide a URL to the privacy statement of the application. This privacy statement defines which personal information is requested, for which purpose and which operators will be able to also process the personal information. After login with Level EMAIL you will see the cryptoname plus all available personal information that fall into the scope profile.</p>
</div>
<div class="paragraph">
<p><strong>PROFILE+EMAIL</strong>
This is a combination of scopes PROFILE and EMAIL. After login you see your crypto name, email address, whether it is validated and all the personal information received for scope profile.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_register_an_application"><a class="anchor" href="#_how_to_register_an_application"></a>11.1.2. How to register an application</h4>
<div class="paragraph">
<p>Any application (mobile, web browser based, native or API) that supports OpenID Connect can be registered with the LandSense Authorization Server (OpenID Connect Provider). Assuming successful registration, the application can then use other provisioning and offerings from other registered APIs leveraging access tokens.</p>
</div>
<div id="img-Landsense-application-registration" class="imageblock">
<div class="content">
<img src="images/LandsenseApplicationRegistration.png" alt="Federation app registration">
</div>
<div class="title">Figure 43. Federation Application Registration</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_landsense_engagement_platform"><a class="anchor" href="#_landsense_engagement_platform"></a>11.2. LandSense Engagement Platform</h3>
<div class="paragraph">
<p>In a nutshell, the LandSense Engagement Platform (<a href="https://lep.landsense.eu" class="bare">https://lep.landsense.eu</a>) is to become the marketplace where citizens can participate in the various Land Use and Land Cover (LULC) related campaigns and interested parties can reuse existing services and register new applications.</p>
</div>
<div class="paragraph">
<p>The first version of the LandSense Engagement Platform was realized based on the existing tools, services and platforms from LandSense partners as well as new applications built for the Demo Cases.</p>
</div>
<div id="img-Landsense-login" class="imageblock">
<div class="content">
<img src="images/LandsenseLogin.png" alt="LEP login">
</div>
<div class="title">Figure 44. LandSense Engagement Platform login</div>
</div>
</div>
<div class="sect2">
<h3 id="_scent_harmonization_platform"><a class="anchor" href="#_scent_harmonization_platform"></a>11.3. Scent Harmonization Platform</h3>
<div class="paragraph">
<p>Scent Harmonisation Platform Visualisation Site (<a href="https://scent-harm.iccs.gr/" class="bare">https://scent-harm.iccs.gr/</a>) is a client application tailored for the purposes of inspecting and visualising traditional in-situ and citizen-generated observations.</p>
</div>
<div class="paragraph">
<p>The Visualisation site constitutes a custom innovative application that exposes the resources made available from the Scent Harmonisation Platform. The application conforms to OGC SensorThings API standard and it consists of the following main characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User-friendly interfaces enabling both time-series analysis and spatial representation of SensorThings API resources including graphical visualisations with filtering capabilities per observed phenomenon and sensor as well as low-level interaction with the Harmonisation Platform SensorThings driven schema.</p>
</li>
<li>
<p>An interactive campaign dashboard that enables the spatial visualisation and graphic representation of the images of Land Cover/ Land Use elements that have been collected from the volunteers in the context of the project&#8217;s citizen science campaigns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Scent Harmonisation Platform manages a variety of citizen-generated data as well as environmental data that has been collected through in-situ monitoring stations in Kifisos river basin, Attica, Greece. All the data are being maintained and have been structured according to widely accepted standards, such as the Open Geospatial Consortium (OGC) in order to be compliant with open and unified frameworks (such as SensorThings API).</p>
</div>
<div class="paragraph">
<p>Details regarding the integration of Scent Harmonisation Platform Visualisation Site with LandSense authorisation server are provided in <a href="#Scent-Landsense">Integration between SCENT &amp; LandSense</a>.</p>
</div>
<div id="img-Scent-Harmonization-Platform-Login" class="imageblock">
<div class="content">
<img src="images/ScentHarmonizationPlatform.png" alt="Scent Harmonization Platform">
</div>
<div class="title">Figure 45. Scent Harmonization Platform Login</div>
</div>
</div>
<div class="sect2">
<h3 id="_scent_explore"><a class="anchor" href="#_scent_explore"></a>11.4. Scent Explore</h3>
<div class="paragraph">
<p>Scent Explore is a mobile application that enables citizens to capture environmental related information. It provides a user-friendly interface through which citizens are guided to areas where essential environmental information is needed. There, they may collect images of LC/LU elements along with textual descriptions, measure water level and flow velocity and report flood related events like the existence of obstacles in the river, flooded locations, etc. Citizens use the app in a playful way, by discovering and collecting little characters hiding in places around them and thus collecting points.</p>
</div>
<div class="paragraph">
<p>Details regarding the integration of Scent Explore with LandSense authorisation server are provided in <a href="#Scent-Landsense">Integration between SCENT &amp; LandSense</a>.</p>
</div>
<div id="img-Scent-Explore-application" class="imageblock">
<div class="content">
<img src="images/ScentExplore.png" alt="Scent Explore application">
</div>
<div class="title">Figure 46. Scent Explore Application Login</div>
</div>
</div>
<div class="sect2">
<h3 id="_scent_measure"><a class="anchor" href="#_scent_measure"></a>11.5. Scent Measure</h3>
<div class="paragraph">
<p>Scent Measure is a mobile application that works in tandem with a potable smart sensor (Xiaomi International Version Flower Care Smart Monitor), connected to the user’s mobile device aiming to measure soil conditions. Users can simply insert the sensor into the ground and, select whether to measure and report soil moisture levels and/or air temperature and receive the measurements directly to the app.</p>
</div>
<div class="paragraph">
<p>It constitutes an Android application that has been developed with Java as it enables easy system modelling and has support for many cross-platform software libraries.
The Scent Measure application, can be easily modified/adapted to support any kind of smart measuring sensors providing they have a Bluetooth connection interface with the portable devices and Bluetooth support for the messages exchange from the sensor to the portable device.</p>
</div>
<div class="paragraph">
<p>Details regarding the integration of Scent Measure with LandSense authorisation server are provided in <a href="#Scent-Landsense">Integration between SCENT &amp; LandSense</a>.</p>
</div>
<div id="img-Scent-Measure-application" class="imageblock">
<div class="content">
<img src="images/ScentMeasure.png" alt="Scent Measure application">
</div>
<div class="title">Figure 47. Scent Measure Application Login</div>
</div>
</div>
<div class="sect2">
<h3 id="_nimmbus_geospatial_user_feedback"><a class="anchor" href="#_nimmbus_geospatial_user_feedback"></a>11.6. NiMMBus Geospatial User Feedback</h3>
<div class="paragraph">
<p>The NiMMBus web portal records geospatial user feedback about existing geospatial resources. The user is able to provide comments, rates, quality reports and publications related to a geospatial resource. It can be used to comment on datasets but also on individual observations. The system allows to creating a citation of an external resource (in an external catalogue or repository) and associate feedback items about it. It builds upon a service developed in the H2020-funded NextGEOSS project. Registered as an Web Browser based application with the LandSense Authorization Server, the application can be used to collect user feedback with resources provided by other Resource Servers (APIs) also registered with the LandSense Authorizaiton Server.</p>
</div>
<div class="paragraph">
<p>The system is based on the NiMMbus; a solution for storing geospatial resources on the MiraMon cloud. The system implements the Geospatial User Feedback (GUF) standard developed in the OGC GUF (and started in the FP7-funded GeoViQua project).</p>
</div>
<div class="paragraph">
<p>The solution is composed by three elements: the open source code for a JavaScript the client, a server that stores the feedback information and a well document API that allows for interacting with the client.</p>
</div>
<div id="img-NiMMbus-GUF" class="imageblock">
<div class="content">
<img src="images/NiMMbusGUF.png" alt="NiMMbus GUF">
</div>
<div class="title">Figure 48. NiMMbus  NiMMBus Geospatial User Feedback Login</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="CitSciGEOSS"><a class="anchor" href="#CitSciGEOSS"></a>12. Connecting Citizen Science data sets to GEOSS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the developments outlined above, this Interoperability Experiment also examined possibilities for the Citizen Science community to make their projects discoverable and accessible via the Global Earth Observation System of Systems (GEOSS).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The worldwide effort to build GEOSS is led by the Group on Earth Observations (GEO). GEO is an intergovernmental organization working to improve the availability, access and use of Earth observations for the benefit of society. GEO works to actively improve and coordinate global Earth Observation systems and promote broad, open data sharing.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We see a major benefit in establishing this connection because GEOSS already provides an established process to clarify data policies together with established data management principles, and to provide the minimum metadata required to access the data sets created by Citizen Science projects. This activity thereby helps to surface and to mobilize already existing data sets - with clear acknowledgment of the Citizen Science contributions. We expect that this work provides concrete contributions to the increasing discussions on how Citizen Science could connect to GEOSS and, more generally, how more in-situ data and derived knowledge could become available at the global level.</p>
</div>
<div class="paragraph">
<p>Within this Interoperability Experiment, we particularly explored the possible technical connection with the GEOSS Platform facilitated by OGC standards. We also identified organizational structures that would be required in order to provide a more flexible and scalable solution to Citizen Science projects, both big successful ones and small ones. We consider this as a major need for the future evolution of the Citizen Science contribution because of the high number of already existing projects that could potentially be connected to GEOSS. OGC standards can play an essential role to facilitate this connection. This elaboration would be also generalized to ongoing debates on increasing the availability of in-situ datin GEOSS.</p>
</div>
<div class="paragraph">
<p>Notably, we see the connection with GEOSS as one highly promising way to make Citizen Science data better accessible and more widely used. For example, complementary efforts might be undertaken, to increase the findability via mainstream search engines, or – more generally – to provide the machine readable information about projects resources that is required for automated harvesting by web-crawlers. We come back to this issue in the final part of this section, when outlining possible follow up activities.</p>
</div>
<div class="paragraph">
<p>With our exercise so far, we follow the next overarching principles and carry them to the Citizen Science community:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.earthobservations.org/documents/dswg/201504_data_management_principles_long_final.pdf">GEO Data Management Principles</a>, addressing issues such as discovery, access, traceability, quality documentation and preservation.</p>
</li>
<li>
<p>Not favoring any silos, i.e. need for open data and leveraging open solutions, which in this context means the provision of data as part of the <a href="https://www.earthobservations.org/geoss_dsp.shtml">GEOSS Data Core</a>, but also the application of the GEO Architecture Principles, which in addition advocate flexibility, scalability, etc.</p>
</li>
<li>
<p>Distributed, standards based, and flexible to support interoperability while meeting a range of use cases and needs, which translates to the use of the <a href="https://www.geodab.net/">GEOSS Discovery and Access Broker (GEO DAB)</a> that includes – among other - the support to a large range of OGC standards.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_connecting_a_single_citizen_science_project_to_geoss"><a class="anchor" href="#_connecting_a_single_citizen_science_project_to_geoss"></a>12.1. Connecting a single Citizen Science project to GEOSS</h3>
<div class="paragraph">
<p>The most straight forward way to connect Citizen Science data sets to GEOSS is the inclusion of the project that collects these data sets at the GEOSS Platform. This process essentially requires the registration of the project in the GEOSS ‘Yellow Pages’ and it can be used to register also multiple data sets from one single project (see also <a href="#img-GEOSSYellowPages">Figure 49</a> below).</p>
</div>
<div id="img-GEOSSYellowPages" class="imageblock">
<div class="content">
<img src="images/GEOSSYellowPages.png" alt="GEOSS Yellow Pages">
</div>
<div class="title">Figure 49. Sketch on registering a single project at the GEOSS Platform</div>
</div>
<div class="paragraph">
<p>The entry of the Yellow Pages requires information (metadata) such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Lead organization</em> (name, description, URL, geographical coverage, GEO affiliation, contact points, etc.)</p>
</li>
<li>
<p><em>Type of</em> provided online <em>resource</em> (data, vocabulary, model, algorithm, etc.) – in the context of this Interoperability Experiment we focus on data</p>
</li>
<li>
<p><em>Data policy</em>, including the option to declare as free and open by choosing “GEOSS Data Core” (see <a href="#img-GEOSSYellowPagesForm">Figure 50</a> below)</p>
</li>
<li>
<p>Indication of GEOSS <em>data management principles</em> that are implemented (see <a href="#img-GEOSSYellowPagesForm">Figure 50</a> below)</p>
</li>
<li>
<p>Relevance for the <em>Sustainable Development Goals</em></p>
</li>
<li>
<p>A service <em>endpoint</em></p>
</li>
</ul>
</div>
<div id="img-GEOSSYellowPagesForm" class="imageblock">
<div class="content">
<img src="images/GEOSSYellowPagesForm.png" alt="GEOSS Yellow Pages">
</div>
<div class="title">Figure 50. Parts of the items asked for when registering in the GEOSS Yellow Pages</div>
</div>
<div class="paragraph">
<p>Once completed, the information provided by the Citizen Science project is passed on to the GEO DAB team. Members of this team check the entries and run some tests (for example, if the provided endpoint actually serves the intended data, if it needed to implement the required standards (from the OGC or comparable alternatives) and if it indeed follows the indicated principles and applies the indicated data policy). This testing might entail a dialogue with the registering Citizen Science project in order to make the project’s offer fit to the promises in the entry for the GEOSS Yellow Pages.</p>
</div>
<div class="paragraph">
<p><a href="https://scent-project.eu/">SCENT Citizen Observatory</a> successfully undertook the process to offer its citizen-generated data to GEOSS. Following the administrative registration that was described in detail above, the Interoperability Registration and Brokering workflow took place. This was the second phase and consisted of the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Technological Information was provided to the DAB team. More specifically the SCENT web server URL, the endpoints of the SCENT OGC web services (WMS, WFS) were sent to the DAB team along with the accompanied descriptions. In addition, information was provided about WFS and WMS services versions, the supported relevant operations through the APIs (e.g. GetCapabilities, DescribeFeatureType, GetFeature, etc.), the various feature types, the SCENT data to be integrated to GEOSS (i.e. event, images, video metadata) and the associated geographic regions that they cover (i.e. Kifisos river basin, Attica Greece and Danube Delta, Romania).</p>
</li>
<li>
<p>DAB team conducted a set of interoperability tests with SCENT WFS and WMS services, including discoverability, accessibility and visualisation use cases. A test report (GEO DAB/SCENT web server Brokering Test Report) was generated as an output of this process.</p>
</li>
<li>
<p>Notification was received from DAB team regarding the successful conduction of the tests and that no interoperability issue was found. Taking into consideration also suggestions indicated in the test report, metadata information of the datasets provided was further enriched.</p>
</li>
<li>
<p>As a final step of the process, the DAB team proceeded with the successful integration of SCENT web server into GEOSS Portal (offering its services to production environment). Thus, users can access SCENT resources via the GEOSS Portal catalogue (<a href="https://www.geoportal.org/?f:sources=wfsscentID%2CwmsSCENTID" class="bare">https://www.geoportal.org/?f:sources=wfsscentID%2CwmsSCENTID</a>) as presented in the <a href="#img-ScentResourcesAvailableInGEOSSPortal">Figure 51</a>.</p>
</li>
</ul>
</div>
<div id="img-ScentResourcesAvailableInGEOSSPortal" class="imageblock">
<div class="content">
<img src="images/ScentResourcesAvailableInGEOSSPortal.png" alt="Scent Resources in GEOSS">
</div>
<div class="title">Figure 51. Scent resources available in GEOSS portal</div>
</div>
<div class="paragraph">
<p>Overall, we proved that Citizen Science projects indeed can implement the free and open data policy of the GEOSS Data Core, and that all of the GEOSS Data Management Principles are followed by Scent. Furthermore, out of the OGC Citizen Science Domain Working Group (DWG) we offer examples and guidance on how this can be realized with OGC standards. However, realistically speaking, and in order to see concrete progress, it appears more feasible that projects first enter what they already support, and at least fulfill the <a href="http://geolabel.info/Discoverable.htm">needs to make their data sets discoverable from within the GEOSS Platform</a> using <a href="http://geolabel.info/Metadata.htm">well-documented metadata</a>, and including <a href="http://geolabel.info/Quality.htm">information about data quality</a>. Following the brokering approach of GEOSS, this entails that the projects provide a minimum of required information, and ideally follow one of the multiple standards that are already supported by the GEOSS platform. If it should not be immediately possible to also provide <a href="http://geolabel.info/DataAccess.htm">one of the multiple options to make data accessible</a> or to provide that data in an <a href="http://www.geolabel.info/Encoding.htm">already recognized encoding</a>, it might still be considered to register a projects and then update the record in the Yellow Pages once the additional functionalities for harmonized data access are put in place by the project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_why_a_case_by_case_registration_is_not_the_best_way_forward"><a class="anchor" href="#_why_a_case_by_case_registration_is_not_the_best_way_forward"></a>12.2. Why a case-by-case registration is not the best way forward</h3>
<div class="paragraph">
<p>Although the possibility to register Citizen Science projects of any size in GEOSS exists and has been illustrated in the previous section, we do not recommend that each and every project go ahead and register by itself now. Potentially, the number of relevant contributions is (at least) in the hundreds, see for example, <a href="http://data-staging.jrc.it/dataset/jrc-citsci-10004">this project inventory</a> and the related <a href="https://ec-jrc.github.io/citsci-explorer/">prototype of a project catalogue</a> (<a href="#img-GEOSSCitSciExplorer">Figure 52</a>).</p>
</div>
<div id="img-GEOSSCitSciExplorer" class="imageblock">
<div class="content">
<img src="images/GEOSSCitSciExplorer.png" alt="Citizen Science Explorer">
</div>
<div class="title">Figure 52. Example Citizen Science explorer providing access to 508 different projects (status: 13 June 2019)</div>
</div>
<div class="paragraph">
<p>It becomes obvious that a case-by-case registration per project (which each might want to register one data set or more) would create a bottle neck towards the GEO DAB and the team that is responsible to evaluate and test entries in the GEOSS Yellow Pages. As a result of our investigations within this Interoperability Experiment, we therefore suggest to elaborate on and develop an <strong>intermediate layer</strong> that provides the required organizational and technical support to the Citizen Science community so that their data sets become better discoverable, accessible, and potentially more widely used - thereby also amplifying visibility and impact of the individual projects.</p>
</div>
<div class="paragraph">
<p>We consider such structures particularly important in view of larger mobilization campaigns of Citizen Science projects, as, for example, planned within the context of the Earth Challenge 2020 (EC2020). Again, also here the two/multiple-step approach - where project resources become discoverable first and commonly accessible in a second stage - might be most realistic in order to progress more quickly and to have intermediate results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_improve_the_connection_of_citizen_science_into_geoss"><a class="anchor" href="#_how_to_improve_the_connection_of_citizen_science_into_geoss"></a>12.3. How to improve the connection of Citizen Science into GEOSS</h3>
<div class="paragraph">
<p>In order to move ahead, we identified requirements that we are grouping in different approaches that complement each other.</p>
</div>
<div class="sect3">
<h4 id="_provide_technical_support_to_connect_to_the_geoss_platform"><a class="anchor" href="#_provide_technical_support_to_connect_to_the_geoss_platform"></a>12.3.1. Provide technical support to connect to the GEOSS platform</h4>
<div class="paragraph">
<p>There appears a need to slot a technical support for Citizen Science projects in ahead the GEO DAB. This additional support should remove the potential bottle neck and help to scale up the number or Citizen Science projects and their data sets in the GEOSS Platform (and ideally in the GEOSS Data Core). Requirements for this support entail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support Citizen Science projects in filling the GEOSS Yellow Pages.</p>
</li>
<li>
<p>Proving examples and guidance on the use of OGC standards for implementing GEOSS requirements for data discovery, quality descriptions, data access, data encodings, etc.</p>
</li>
<li>
<p>Pre-testing of yellow page entries before registration in GEOSS.</p>
</li>
<li>
<p>If necessary, interaction with individual projects to correct their entries for the Yellow Pages.</p>
</li>
<li>
<p>Liaise with the GEO DAB team in order to actually register the new entries.</p>
</li>
<li>
<p>Establish a capacity building mechanism, capable to support and equip existing initiatives with the necessary skills to apply data management principles related to the accessibility, discoverability, re-usability and curation of their resources.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_federate_multiple_citizen_science_projects_and_their_endpoints_into_a_single_access_point"><a class="anchor" href="#_federate_multiple_citizen_science_projects_and_their_endpoints_into_a_single_access_point"></a>12.3.2. Federate multiple Citizen Science projects and their endpoints into a single access point</h4>
<div class="paragraph">
<p>To reduce the number of endpoints connected to the GEOSS Platform, federations of citizen Science projects could act as hubs that would in fact cluster multiple Citizen Science projects and their endpoints into a single access point, which is then registered within the GEOSS Platform (see <a href="#img-GEOSS_EC2020Gateway">Figure 53</a>).</p>
</div>
<div class="paragraph">
<p>This federations could be thematic or regional and take advantage of the current structure of activities in the GEO work program.</p>
</div>
<div class="paragraph">
<p>Considering the Earth Challenge 2020 we could imagine the following architecture: EC2020 will collect new data and offer it via a dedicated API. At the same time, several already existing Citizen Science projects partner with EC2020 and also provide access to their data (in different forms). For the connection to GEOSS, EC2020 could provide a gateway that federates the newly collected data and the offerings of the different partners to a single discovery service and a single data access service. These two endpoints would be registered via the Yellow Pages with the GEOSS Platform only once and thereby make the EC2020 resources more widely visible, together with a clearly defined and well-known data policy and following most recent data management principles. The figure below depicts this setting.</p>
</div>
<div id="img-GEOSS_EC2020Gateway" class="imageblock">
<div class="content">
<img src="images/GEOSS_EC2020Gateway.png" alt="GEOSS EC2020 Gateway">
</div>
<div class="title">Figure 53. Sketch of a possible connection between EC2020 and the GEOSS Platform (one possible scenario), as an example of a more coordinated structure to make Citizen Science data discoverable and accessible via GEOSS</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It is important to realize that we are not proposing a single federation maintained by GEO but a collection of self organized federation that act as a aggregation point and provide services to the citizen science projects. This federations can have different scales and can be thematic or regional.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_extra_considerations_for_citizen_science_federations"><a class="anchor" href="#_extra_considerations_for_citizen_science_federations"></a>Extra considerations for Citizen science federations</h5>
<div class="paragraph">
<p>A federation of services can provide extra services to the citizen science projects. This is a short list of examples that can grow with time.</p>
</div>
<div class="paragraph">
<p><strong>Standard translation</strong></p>
</div>
<div class="paragraph">
<p>Currently the GEO DAB does not fully support Sensor Web Enablement (SWE) standards such as OGC Sensor Observing System and OGC SensorThingsAPI. A service in the federatino can provide the translationof services to other supported ones such as WFS or WMS allowing for an harmonized access via the GEOSS Platform.</p>
</div>
<div class="paragraph">
<p><strong>Data agregation</strong></p>
</div>
<div class="paragraph">
<p>Some compatible projects can be aggregated into bigger virtual datasets that can be served on demand.</p>
</div>
<div class="paragraph">
<p><strong>Federated authentication</strong></p>
</div>
<div class="paragraph">
<p>As discussed in <a href="#SSO">User and Application Federation</a>, a federation could provide a mechanism to authenticate user that can them provide observations to several projects in the federation from a single app or from multiple apps used in parallel. This can be useful on the data input case (data capture) but could be also used for a pull of experts validating data coming from different projects. A federated authentication can also protect the privacy of the citizens as will be discussed in <a href="#GEO-privacy">Citizen privacy and protection</a></p>
</div>
<div class="paragraph">
<p><strong>Data preservation</strong></p>
</div>
<div class="paragraph">
<p>A federation can provide a service that allow for archiving data from project campaigns from ephemeral citizen science projects or projects that can no longer be maintain.</p>
</div>
<div class="paragraph">
<p><strong>Common definitions</strong></p>
</div>
<div class="paragraph">
<p>Sharing common definitions (with tools such as the definition server proposed in <a href="#DefinitionServer">Definition Server</a>) will be essential to ensure data integration and should be a part of the federation.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_improve_networking_and_capacity_building"><a class="anchor" href="#_improve_networking_and_capacity_building"></a>12.3.3. Improve networking and capacity building</h4>
<div class="paragraph">
<p>On the other hand, and because the offerings made above alone would not be enough to actually advance from the current situation, also the networking the Citizen Science community deserves dedicated attention. The current Earth Observations Citizen Science community activity in the GEO work program could provide additional help. The following requirements has been identified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mobilizing existing data sets, i.e. reaching out to the Citizen Science community and let them know about this work and the linked offering of increased visibility and possibly impact, providing guidelines and practical examples on what would need to be done from their side, offering support in establishing the connections.</p>
</li>
<li>
<p>Help in preparing new data sets, i.e. be available to consult Citizen Science projects during their set-up phase, and let the community know about this offer.</p>
</li>
<li>
<p>Promote FAIR data management and GEOSS as a practical way to get there.</p>
</li>
<li>
<p>Provide access and training for (OGC) standard-based tools that the community can use to make the connection, and implement the desired data policy and data management principles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For further discussions and possible realizations, it should be considered if the support outlined above could be provided in a coordinated but decentralized way. We could imagine that the above mentioned support could be set of for different geographic regions, thematic areas, or other sensible divisions (e.g. with a retaliation that is specific for EC2020, which would still need to be discussed). Such settings could also help to disseminate good practices, for example, on the use of OGC standards in this context.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_future_work_regarding_to_the_geoss_integration"><a class="anchor" href="#_future_work_regarding_to_the_geoss_integration"></a>12.4. Future work regarding to the GEOSS integration</h3>
<div class="paragraph">
<p>The experiment helps us to identify current possibilities, and to shape parts of the way forward. However, it has also left a few questions unanswered and raised some new issues. We should	develop different scenarios to meet the identified organizational requirements exposed before. From our experiences, we see particular needs to further investigate the following aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Acknowledging that Citizen Science data is already included in GEOSS today, i.e. systematically flagging where Citizen Science already contributed to a knowledge resource on the GEOSS Platform (GEOSS Data Core, ideally).</p>
</li>
<li>
<p>Develop detailed examples and guidance on how CS projects can implement the different GEO Data Management Principles by using the many already supported OGC standards.</p>
</li>
<li>
<p>Consider promoting Sensor Web Enablement (SWE) standards such as OGC Sensor Observing System and OGC SensorThingsAPI to be considered by the GEO DAB, because both standards appear to be taken up by several Citizen Science projects, but at the moment to write this lines the are not supported by the GEO DAB, so other standards (such as WFS or WMS) need to be implemented in addition to allow harmonized access via the GEOSS Platform.</p>
</li>
<li>
<p>Consider Citizen Science not only as a data source, but also explore the possibilities and use of OCG standards when it comes to the engagement of Citizen Scientists as part of data validation.</p>
</li>
<li>
<p>Also consider Citizen Science as part of the processing capacity, collective intelligence, data cubes, relationship to Web Processing Service (WPS), work on Artificial Intelligence, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While focusing on the connection to GEOSS here, we should also investigate how this work related to the provision of metadata for ‘flat’ online searches (e.g. Google search) and the accessibility to automatic web crawlers. We might want to address both in a single go. If we will work towards intermediate organizational structures the help the Citizen Science community in using OGC standards and the GEOSS Platform for improved data policies and management, can these intermediaries – and the tools and services they provide – also automatically cover these complementary needs?</p>
</div>
<div class="sect3">
<h4 id="GEO-privacy"><a class="anchor" href="#GEO-privacy"></a>12.4.1. Citizen privacy and protection</h4>
<div class="paragraph">
<p>The aspect of citizen privacy and personal data protection is a serious issue that should not be undermined. There has been recent examples of commercial companies using social media companies personal data and citizen profiles for unethical purposes of for their own profit. In extreme cases companies business model was based on collecting, and integrating personal data of their users to then sell to third parties personalized databases and services for commercial or political targeting. Accidentally allowing citizen science data to be gathered by these platforms, thus opening the door to their use of the personal data of those who have collected the data and those who use them, without their consent. This is clearly against the data protection regulations in Europe and other areas in some but still done by some if technically possible.</p>
</div>
<div class="paragraph">
<p>This important issue needs to be addressed by the individual citizen science projects the emerging federations and the GEOSS platform at large. This is a real problem that should be included in an GEO architecture ensuring a good balance between the necessary anonymity of the citizens personal data as well as the acknowledgement of their individual contributions when participating in the Citizen Science activities. The proposed federation discussed in the <a href="#SSO">User and Application Federation</a> has an embedded component taking care of this aspect (see  <a href="#SSOLevelsOfPrivacy">Levels of personal information</a>) with two levels that ensure absolute privacy while other levels allow for some degree of acknowledgement and recognition. This needs to be complemented with the way  hosts, manage and own data</p>
</div>
<div class="paragraph">
<p>It is our responsibility to raise this issues within the GEO community and find the right solution that will probably require a composition of technical, management and legal aspects.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Scent-Landsense"><a class="anchor" href="#Scent-Landsense"></a>Appendix A: Integration between SCENT &amp; LandSense</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title"><strong class="big">A.1 Introduction</strong></div>
<p>During the past few years a variety of citizen-science tools have been implemented, aiming to enable citizens and relevant associations and groups to be involved and engaged with environmental monitoring. The scope and functionalities of such tools may vary, ranging from mobile applications enabling collection and semantic annotation of multimedia and communication with portable sensors to visualisation engines and content creation and campaign configuration applications.</p>
</div>
<div class="paragraph">
<p>One of the scopes of this activity, is to demonstrate interoperability and integration between implemented processes of authentication and authorisation. In particular, three applications developed within the H2020 SCENT Citizen Observatory project, the visualisation site of SCENT Harmonisation platform, SCENT Explore and SCENT Measure are integrated with an authorisation server implemented by H2020 LandSense Citizen Observatory. Thus, this chapter aims to showcase both the results arising from this process as well as to constitute a guide aiming primarily to assist integration of existing citizen-science applications with LandSense authorisation server or even to replicate this process within their own infrastructure.</p>
</div>
<div class="paragraph">
<div class="title"><strong class="big">A.2 Setting the scene</strong></div>
<p>Authorisation depends on, but is rather separated from authentication. The first term refers to the process of deciding whether an application should be allowed to conduct an operation following the reception of a request by the user, whilst the second lies on determining the identity of the user or program sending that request. A characteristic of an authentication mechanism constitutes the Single Sign On (SSO), that relates to the user’s identity being used to provide access across multiple systems (i.e. services, applications). SSO allows a single authentication process (managed by a single Identity Provider, or other authentication mechanism) to be used across multiple systems within a single organization or across multiple organizations (i.e. common login credentials across systems). Last but not least, establishing a federation involves the management and mapping of user identities between Identity Providers across organizations (and security domains) via trust relationships.
In the context of this experiment, the following paradigms (use cases) were assessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>having different systems across multiple organisations (projects) trusting/connecting to a single third-party Identity Provider;</p>
</li>
<li>
<p>having different Identity Providers across different projects trusted by a single system</p>
</li>
</ul>
</div>
<div id="img-SCENT-LANDSENSE-INTEGRATION" class="imageblock">
<div class="content">
<img src="images/SCENTLANDSENSEINTEGRATION.png" alt="Scent-LandSense">
</div>
<div class="title">Figure 54. Architectural overview of integration between SCENT applications and LandSense authorisation server</div>
</div>
<div class="paragraph">
<div class="title"><strong class="big">A.3 SCENT Harmonisation Platform visualisation site</strong></div>
<p>SCENT Harmonisation platform visualisation site, constitutes a single page web application written in JavaScript. To achieve integration with LandSense authorisation server, the ‘implicit grant’ modality of OAuth2 protocol is implemented. The reason for using Implicit Grant Type is because the Harmonisation Platform (and any front-end javascript application) cannot guarantee the client secret confidentiality (which is essential for the other OAuth2 flows).  Following the user log in, the access_token is issued immediately allowing users to access and use protected resources and operations. In addition to the access token, an ID token is also issued from the Authorisation Server. The ID token takes the form of a JWT (JSON Web Token) which is a JSON payload that is signed with the private key of the issuer (LandSense Identity Manager) and can be parsed by the Harmonisation Platform. Inside the JWT (ID token), there are a handful of defined property names that provide information to the application (e.g. the Harmonisation Platform). This info includes a unique identifier for the user, the identifier for the server that issued the token, the identifier for the client that requested the token, etc. But it also includes some user attributes (email, name, etc) so as for the client (e.g. Harmonisation Platform) to be able to display the user info in the navigation bar.</p>
</div>
<div id="img-implicit-grant" class="imageblock">
<div class="content">
<img src="images/implicitgrant.jpg" alt="implicit-grant">
</div>
<div class="title">Figure 55. Architectural overview of integration between SCENT applications and LandSense authorisation server</div>
</div>
<div class="paragraph">
<p>The scenario involves the following main steps as displayed in the image above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first step involves in interaction of the user with the web-browser (i.e. selecting to log in) and based on which the client generates and sends a login request to the authorization server (i.e. LandSense authorisation server in our case). The request is sent in the form of a HTTP request and the information is sent as URL query parameters. More specifically, the following parameters are specified during the request:</p>
<div class="ulist">
<ul>
<li>
<p>client_id: A publicly exposed string that is used by the service API to identify the application</p>
</li>
<li>
<p>redirect_uri: The location where the service will redirect the user after they authorise (or deny) the application (i.e. Harmonisation Platform) and therefore the part of the application that will handle access and ID tokens.</p>
</li>
<li>
<p>scope: It specifies the level of access that the application is requesting.</p>
</li>
<li>
<p>response_type: In this flow, the value is “id_token”, which means that a successful response must include both an access token and an ID token.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The configuration file that was created is provided below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    export const oidcSettings = {
      authority:   'https://as.landsense.eu',
      clientId:       '<span class="tag">&lt;my_client_id_&gt;</span>',
      redirectUri: 'https://scent-harm.iccs.gr/oidc-callback',
      responseType: 'id_token',
      scope: 'openid profile email landsense birdlife',
      end_session_endpoint: 'https://as.landsense.eu/oauth/revoke'
      }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The aforementioned configuration file has been used by the library vuex-oidc (url: <a href="https://github.com/perarnborg/vuex-oidc" class="bare">https://github.com/perarnborg/vuex-oidc</a>, License: MIT). Vuex-oidc library has been integrated with the Harmonisation Platform in order to implement the Oauth2 implicit workflow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In what follows, the authorisation server checks the request, and if it is valid, it presents to the user the login form.</p>
</li>
<li>
<p>The user inserts his credential by selecting one of the systems registered to the LandSense authentication server. Following the conclusion of this process, the access and ID tokens are sent to the SCENT Harmonisation visualisation site and the user is automatically transferred back to the application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong class="big">A.4 SCENT Measure</strong></div>
<p>Scent Measure is a mobile application that works in tandem with a potable smart sensor (Xiaomi International Version Flower Care Smart Monitor), connected to the user’s mobile device aiming to measure soil conditions. The application is available for Android versions newer that 4.3 Jelly Bean and it requires devices with Bluetooth version greater than 4.1 and offers a maximum measurement update frequency of 15sec.
The section below describes the process from the integration of SCENT Measure with LandSense authorization server, while also constituting a guide that can facilitate integration of any android application with Identity Management System that adopt the OAuth2 protocol.</p>
</div>
<div class="paragraph">
<div class="title">A.4.1 Integration with LandSense: Guide for Android applications</div>
<p>In order to enable login in to your application with Landsense you will have to implement the openid connect authentication code flow. In order to speed-up the development process you can use (AppAuth) which is publicly available and documented in the following link.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">https://appauth.io/</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can import AppAuth by using the following dependency in your build.gradle file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">implementation 'net.openid:appauth:0.7.1'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you are ready to use app-auth’s classes in order to implement your authentication flow.
Initially you will have to create an authentication service configuration according to details provided by Landsense’s configuration web page available at the following URl</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">https://as.landsense.eu/.well-known/openid-configuration</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration requires Landsense’s authorize and token endpoints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">AuthorizationServiceConfiguration serviceConfig =
    new AuthorizationServiceConfiguration(
            Uri.parse(&quot;https://as.landsense.eu/oauth/authorize&quot;), // authorization endpoint
            Uri.parse(&quot;https://as.landsense.eu/oauth/token&quot;));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next the client application’s specific details must be provided in preparation of the authorization request. The following client application specific details are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Client application id</p>
</li>
<li>
<p>Redirection URL</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find these details within the dedicated Landsense configuration page available for your application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">AuthorizationRequest.Builder authRequestBuilder =
        new AuthorizationRequest.Builder(
                serviceConfig, // the authorization service configuration
                &quot;XXXXXXXXXXXXXXX@as.landsense.eu&quot;, // the client ID, typically pre-registered and static
                ResponseTypeValues.CODE, // the response_type value: we want a code
                Uri.parse(&quot;com.example.application:/callback&quot;)); // the redirect URI to which the auth response is sent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you can build your request and then directly indicate the activities required upon successful and non-successful authentication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">AuthorizationRequest authRequest = authRequestBuilder.build();

AuthorizationService authService = new AuthorizationService(this);

authService.performAuthorizationRequest(
        authRequest,
        PendingIntent.getActivity(this, 0, new Intent(this, FullscreenActivity.class), 0), //Auth succesfull activity
        PendingIntent.getActivity(this, 0, new Intent(this, LoginActivity.class), 0)); //Auth failure activity</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will be able to handle the auth response within the invoked activities as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">AuthorizationResponse resp = AuthorizationResponse.fromIntent(getIntent());
  AuthorizationException ex = AuthorizationException.fromIntent(getIntent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another important aspect required by AppAuth is capturing the authorization redirect. You can configure all redirects through a manifext placeholder io your application’s build.gradle file as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">manifestPlaceholders = [
        'appAuthRedirectScheme': com.example.application :/callback'
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>and  by adding an intent-filter for AppAuth&#8217;s RedirectUriReceiverActivity to your AndroidManifest.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;activity</span>
    <span class="attribute-name">android:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">net.openid.appauth.RedirectUriReceiverActivity</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">tools:node</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replace</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;intent-filter&gt;</span>
        <span class="tag">&lt;action</span> <span class="attribute-name">android:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">android.intent.action.VIEW</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;category</span> <span class="attribute-name">android:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">android.intent.category.DEFAULT</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;category</span> <span class="attribute-name">android:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">android.intent.category.BROWSABLE</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;data</span> <span class="attribute-name">android:scheme</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.application</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/intent-filter&gt;</span>
<span class="tag">&lt;/activity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Following this, you can now login to your application through LandSense.
The following diagram summarizes the process as perceived by Scent Measure’s users:</p>
</div>
<div id="img-Measure-Login" class="imageblock">
<div class="content">
<img src="images/MeasureLogin.jpg" alt="Measure-Login">
</div>
<div class="title">Figure 56. Login sequence diagram for Scent Measure</div>
</div>
<div class="paragraph">
<div class="title"><strong class="big">A.5 Scent Explore</strong></div>
<p>Scent Explore is a mobile application for crowdsourcing that allows users to take pictures, while walking around specific geographic areas - points of interest (PoIs). It exploits some gamification mechanics such us points and badges to engage users. Explore is an Alternate Reality Gaming (ARG) app related to an Authoring tool which generates and visualizes the PoIs on the map. When approaching a point of interest, the application activates the camera and shows an Augmented reality entity to be captured simply by tapping on the screen while taking a picture of the area.</p>
</div>
<div class="paragraph">
<p>The user will then be asked to annotate (tag) the picture. To accurately define the position of the PoI, apart from capturing the location through GPS, the application uses also the gyroscope (if available) for the direction, while also integrating these values with the compass information. The app enables the collection of both pictures and videos for land cover / land use and river parameters (water level &amp; velocity) monitoring respectively.</p>
</div>
<div class="paragraph">
<p>In Scent Explore the users' registrations is managed by a dedicated server, which also manages all users' scores for gamification. This system is not suitable for using external authorisation systems. To overcome this problem, the authorization with LandSense is managed by the application server. The process/steps implemented are described as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user runs SCENT Explore</p>
</li>
<li>
<p>The user selects login via LandSense</p>
</li>
<li>
<p>Scent Explore open the login page inside the app (webView for Android and WKWebView in iOS ): this is mandatory in iOs.</p>
</li>
<li>
<p>The user selects the auth provider from the list</p>
</li>
<li>
<p>LandSense redirects to the selected auth provider</p>
</li>
<li>
<p>The user provides credentials</p>
</li>
<li>
<p>URL redirection to Explore server</p>
</li>
<li>
<p>The Explore Server checks if a SCENT Explore profile exist</p>
</li>
<li>
<p>If it exists, upload the profile information to SCENT Explore</p>
</li>
<li>
<p>If it doesn&#8217;t exist, create a new user profile</p>
</li>
<li>
<p>Login</p>
</li>
</ol>
</div>
<div id="img-Explore-Login" class="imageblock">
<div class="content">
<img src="images/ExploreLogin.png" alt="Explore-Login">
</div>
<div class="title">Figure 57. Login sequence diagram for Scent Explore</div>
</div>
<div class="paragraph">
<p>In this example we will use C# code for Unity3D.
You need to use a webview, possibly cross-platform, before each call, and you should also destroy the old webview to clear the cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">if ( UniWebView != null )
        Destroy(UniWebView);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To add the webview in the scene, use the gameObject method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">UniWebView = gameObject.AddComponent&lt;UniWebView&gt;();</code></pre>
</div>
</div>
<div class="paragraph">
<p>and add the callback to the webview:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>UniWebView.OnPageFinished += OnPageFinished;</pre>
</div>
</div>
<div class="paragraph">
<p>Remember to remove also the callback before destroying the webview:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>UniWebView.OnPageFinished -= OnPageFinished;</pre>
</div>
</div>
<div class="paragraph">
<p>In order to improve the UI, it is suggested to not immediately show the webview. In many cases the mobile connection is slow; thus it is preferable to wait for the web page to be fully loaded before showing the webview.</p>
</div>
<div class="paragraph">
<p>As a next step, open the login page inside the app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">UniWebView.Load(&quot;https://example.com/landsense.php&amp;code=yourprivatecode&quot;);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the php file it is advisable to insert a secret key to protect against possible intrusions.
In the landsense.php file insert the code to open the login page of landsense:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">https://as.landsense.eu/oauth/authorize/openid?client_id=&quot;.$CLIENT_ID.&quot;&amp;response_type=code&amp;state=yourstate&amp;grant_type=authorization_code&amp;scope=openid profile email</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>$CLIENT_ID = the CLIENT_ID code  of your register app in landsense</p>
</li>
<li>
<p>STATE = a your code to verify the Redirection authenticity</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your Landsense login is successful, it will be redirected to the indicated URL. The URL receives the code for the Authorization Bearer method and the state inserted in the call as an additional verification of authenticity.
The code below is used to receive the access token and to be able to use the bees to retrieve the data of the logged user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">        $code = $_GET['code'];
            $state= $_GET['state'];
        $ch = curl_init();
        curl_setopt_array($ch, array(
            CURLOPT_RETURNTRANSFER =&gt; 1,
            CURLOPT_URL =&gt; 'https://as.landsense.eu/oauth/token',
            CURLOPT_HEADER =&gt; 0,
        CURLOPT_POST =&gt; 1,
            CURLOPT_HTTPHEADER =&gt; array('Authorization: Bearer '.$code),
         CURLOPT_POSTFIELDS =&gt;  array(
                        'grant_type' =&gt; 'authorization_code',
                        'client_id' =&gt; $CLIENT_ID,
                        'client_secret' =&gt; $CLIENT_SECRET,
                        'scope' =&gt; 'openid profile email',
                        'code' =&gt; $code )
        ));

        $result = curl_exec($ch);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code below is used to receive the user&#8217;s info and check if the user already has an account on the Explore management server or if a new account needs to be created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">        $ch = curl_init();

        curl_setopt_array($ch, array(
            CURLOPT_RETURNTRANSFER =&gt; 1,
            CURLOPT_URL =&gt; 'https://as.landsense.eu/oauth/userinfo?client_id='.$CLIENT_ID.'&amp;client_secret='.$CLIENT_SECRET,
            CURLOPT_HEADER =&gt; 0,
            CURLOPT_POST =&gt; 1,
CURLOPT_POSTFIELDS =&gt;  'client_id='.$CLIENT_ID.'&amp;client_secret='.$CLIENT_SECRET,
            CURLOPT_HTTPHEADER =&gt; array('Authorization: Bearer '.$usertoken[&quot;access_token&quot;],
        'Content-Type:application/x-www-form-urlencoded' ),
        ));

        $result = curl_exec($ch);
        echo &quot;landsenseloginok:&quot;.$result;</code></pre>
</div>
</div>
<div class="paragraph">
<p>“landsenseloginok:” is a keyword, which is used by the application to understand that Landsense has given permission and that user data is transmitted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">void OnPageFinished(UniWebView webView, int statusCode, string url)
{

        webView.GetHTMLContent((content)=&gt;{

                if ( content.Contains(“landsenseloginok:”) )
                {
                        //elaborate the json value
                }
        });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the json is correct, a specific php page is called in the user management server to check if the user has an account or if a new account needs to be created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ini">        $ch = curl_init();

            curl_setopt_array($ch, array(
            CURLOPT_RETURNTRANSFER =&gt; 1,
            CURLOPT_URL =&gt; &quot;https://www.yourserver.com/api/user/generate_auth_cookie/?username=&quot;.$username.&quot;&amp;password=&quot;.$password,
            CURLOPT_HEADER =&gt; 0,
    CURLOPT_POST =&gt; 0,
        ));

        $result = curl_exec($ch);

        //json decode
        $login = json_decode( $result, true );

        curl_close( $ch);

        //status check
        if ( strcmp($login['status'],&quot;ok&quot;) == 0 )
        {
                    echo &quot;scentexploreresult:&quot;.$result;
                    exit();
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>if the status is “ok” the user has an account otherwise you have to create an account via the API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="RevisionHistory"><a class="anchor" href="#RevisionHistory"></a>Appendix B: Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 3. Revision History</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Release</th>
<th class="tableblock halign-left valign-top">Primary clauses modified</th>
<th class="tableblock halign-left valign-top">Descriptions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">June 15, 2019</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joan Maso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">initial version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">October 6, 2019</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joan Maso</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">preparation for publication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">November 7, 2019</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andreas Matheus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">section 4 and 11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proof read</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-11-18 20:56:26 +0100
</div>
</div>
<link rel="stylesheet" href="stylesheets/coderay-asciidoctor.css">
</body>
</html>